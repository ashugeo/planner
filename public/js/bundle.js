/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/js/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/js/calendars.js":
/*!*****************************!*\
  !*** ./src/js/calendars.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _dates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dates */ \"./src/js/dates.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./selection */ \"./src/js/selection.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stats */ \"./src/js/stats.js\");\n/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tooltip */ \"./src/js/tooltip.js\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ui */ \"./src/js/ui.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  all: [],\n  calendarID: -1,\n  selected: 0,\n  start: null,\n  end: null,\n  editAll: false,\n  reset: function reset() {\n    this.all = [];\n    this.calendarID = -1;\n    this.selected = 0;\n    this.start = null;\n    this.end = null;\n    this.shownStart = null;\n    this.shownEnd = null;\n    $('.calendars-wrap .calendars').empty();\n    $('.calendar-wrap .calendars .content').empty();\n  },\n  init: function init() {\n    var _this = this;\n\n    // Update calendars start and end\n    $(document).on('change', '#start, #end', function () {\n      _this.updateCalendars();\n\n      _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n    }); // Switch calendar\n\n    $(document).on('click', '.calendars-wrap .calendar:not(.selected)', function (e) {\n      var $calendar = $(e.target).closest('.calendar');\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectCalendar($calendar);\n    }); // Add new calendar\n\n    $(document).on('click', '.calendars-wrap .add', function () {\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].newCalendar();\n    }); // Rename calendar in sidebar\n\n    $(document).on('input', '.calendars-wrap p span', function (e) {\n      var $calendar = $(e.target).closest('.calendar');\n      var val = $(e.target).text();\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].renameCalendar(val, $calendar);\n    }); // Rename selected calendar\n\n    $(document).on('input', '.calendar-wrap h2', function (e) {\n      var val = $(e.target).text();\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].renameCalendar(val);\n    }); // Toggle calendar visibility\n\n    $(document).on('click', '.calendars-wrap [data-tool=\"toggle\"]', function (e) {\n      var $calendar = $(e.target).closest('.calendar');\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].toggleCalendar($calendar);\n      return false;\n    }); // Duplicate calendar\n\n    $(document).on('click', '.calendar .tools [data-tool=\"duplicate\"]', function (e) {\n      var $calendar = $(e.target).closest('.calendar');\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].duplicateCalendar($calendar);\n      return false;\n    }); // Delete calendar\n\n    $(document).on('click', '.calendar .tools [data-tool=\"delete\"]', function (e) {\n      var $calendar = $(e.target).closest('.calendar');\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deleteCalendar($calendar);\n      return false;\n    }); // Toggle edit all\n\n    $(document).on('click', '.toggle-edit-all', function () {\n      $('nav [data-tool=\"edit-all\"]').toggleClass('checked');\n      $('.calendars-wrap').toggleClass('edit-all');\n      if ($('.calendars-wrap').is('.edit-all')) _this.editAll = true;else _this.editAll = false;\n    });\n    this.buildCalendarHead();\n  },\n  // Get start and end dates\n  getStartEnd: function getStartEnd() {\n    this.start = new Date(new Date($('#start').val()).setHours(0));\n    this.end = new Date(new Date($('#end').val()).setHours(0));\n    var first = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeFirstWeekDay(this.start);\n    this.shownStart = first; // Create range from first day to end\n\n    var days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(first, this.end); // Fill last week\n\n    while (days.length % 7 !== 0) {\n      days.push(new Date(new Date(days[days.length - 1].valueOf()).setDate(days[days.length - 1].getDate() + 1)));\n    }\n\n    this.shownEnd = days[days.length - 1];\n  },\n  buildCalendarHead: function buildCalendarHead() {\n    var days = ['Mondays', 'Tuesdays', 'Wednesdays', 'Thursdays', 'Fridays', 'Saturdays', 'Sundays'];\n    var headFull = \"<div>\".concat(['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map(function (d, i) {\n      return \"<div data-day=\\\"\".concat(i === 6 ? 0 : i + 1, \"\\\">\\n                \").concat(d, \"<i class=\\\"fas fa-chevron-down\\\"></i>\\n                <div class=\\\"dropdown\\\">\\n                    <span data-tool=\\\"select-weekday\\\"><i class=\\\"fas fa-plus\\\"></i>Select \").concat(days[i], \"</span>\\n                    <span class=\\\"border-top\\\" data-tool=\\\"hide-weekday\\\"><i class=\\\"fas fa-eye-slash\\\"></i>Hide column</span>\\n                </div>\\n            </div>\");\n    }).join(''), \"</div>\");\n    $('.head.full').html(headFull);\n    this.getStartEnd();\n    var range = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(this.start, this.end);\n    var months = range.reduce(function (acc, curr) {\n      var month = \"\".concat(curr.getMonth(), \"-\").concat(curr.getFullYear());\n      if (!acc[month]) acc[month] = 1;else acc[month] += 1;\n      return acc;\n    }, {});\n    var headLinear = \"<div class=\\\"months\\\">\".concat(Object.keys(months).map(function (d) {\n      return \"<div style=\\\"width: \".concat(139 * months[d], \"px\\\"><div class=\\\"month\\\"><span>\").concat(['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'][parseInt(d.split('-')[0])], \"</span><span class=\\\"year\\\">\").concat(d.split('-')[1], \"</span></div></div>\");\n    }).join(''), \"</div>\");\n    headLinear += \"<div>\".concat(range.map(function (day) {\n      return \"<div data-day=\\\"\".concat(day.getDay(), \"\\\">\").concat(day.toLocaleDateString('en-US', {\n        weekday: 'short'\n      }), \" \").concat(day.getDate(), \"</div>\");\n    }).join(''), \"</div>\");\n    $('.head.linear').html(headLinear);\n  },\n  buildCalendar: function buildCalendar() {\n    if (this.end < this.start) return; // Find first week day\n\n    var first = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeFirstWeekDay(this.start); // Create range from first day to end\n\n    var days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(first, this.end); // Fill last week\n\n    while (days.length % 7 !== 0) {\n      days.push(new Date(new Date(days[days.length - 1].valueOf()).setDate(days[days.length - 1].getDate() + 1)));\n    } // Convert days 1D array to weeks 2D array\n\n\n    var weeks = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toWeeksArray(days); // Build HTML\n\n    var html = '';\n\n    var _iterator = _createForOfIteratorHelper(weeks),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var week = _step.value;\n        html += '<div>';\n\n        var _iterator2 = _createForOfIteratorHelper(week),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var day = _step2.value;\n            html += this.buildDayHTML(day);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        html += '</div>';\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return html;\n  },\n  buildDayHTML: function buildDayHTML(day) {\n    var date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day);\n    day.setHours(0); // Show day cell as out of bounds if necessary\n\n    var classname = day < this.start || day > this.end ? ' out' : '';\n    if (day.getDay() === 6 || day.getDay() === 0) classname += ' off';\n    var html = \"<div class=\\\"day\".concat(classname, \"\\\" data-day=\\\"\").concat(day.getDay(), \"\\\" data-date=\\\"\").concat(date, \"\\\"><span>\").concat(day.getDate(), \" \").concat(day.toLocaleDateString('en-US', {\n      month: 'short'\n    }), \"</span><div class=\\\"events\\\"></div></div>\");\n    return html;\n  },\n  updateCalendars: function updateCalendars() {\n    var toAdd = [];\n    var toDelete = [];\n    var toSetIn = [];\n    var toSetOut = [];\n    var oldStart = this.start;\n    var oldEnd = this.end;\n    this.getStartEnd();\n    var start = this.start;\n    var end = this.end;\n    var oldFirst = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeFirstWeekDay(oldStart);\n    var first = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeFirstWeekDay(start);\n    var oldLast = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeLastWeekDay(oldEnd);\n    var last = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeLastWeekDay(end);\n\n    if (oldStart < start) {\n      toDelete.push.apply(toDelete, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(oldFirst, _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(first, -1))));\n      toSetOut.push.apply(toSetOut, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(first, _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(start, -1))));\n    } else if (oldStart > start) {\n      toAdd.push.apply(toAdd, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(first, _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(oldFirst, -1))));\n      toSetIn.push.apply(toSetIn, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(oldStart, -1))));\n    }\n\n    if (oldEnd < end) {\n      toAdd.push.apply(toAdd, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(oldLast, 1), last)));\n      toSetIn.push.apply(toSetIn, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(oldEnd, 1), end)));\n    } else if (oldEnd > end) {\n      toDelete.push.apply(toDelete, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(last, 1), oldLast)));\n      toSetOut.push.apply(toSetOut, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(end, 1), last)));\n    } // Add new days\n\n\n    if (toAdd.length > 1) {\n      var weeks = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toWeeksArray(toAdd);\n      var html = '';\n\n      var _iterator3 = _createForOfIteratorHelper(weeks),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var week = _step3.value;\n          html += '<div>';\n\n          var _iterator4 = _createForOfIteratorHelper(week),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var day = _step4.value;\n              var date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day);\n              html += this.buildDayHTML(day);\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n\n          html += '</div>';\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      if (oldStart > start) $('.calendar.content, .calendar > .content').prepend(html);else if (oldEnd < end) $('.calendar.content, .calendar > .content').append(html);\n      this.updateCalendarHeight();\n    } // Remove 'out' class for days that are now in scope\n\n\n    for (var _i = 0, _toSetIn = toSetIn; _i < _toSetIn.length; _i++) {\n      var _day = _toSetIn[_i];\n\n      var _date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(_day);\n\n      $(\".day[data-date=\\\"\".concat(_date, \"\\\"]\")).removeClass('out');\n    } // Delete excessive days\n\n\n    if (toDelete.length >= 7) {\n      var _iterator5 = _createForOfIteratorHelper(toDelete),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _day2 = _step5.value;\n\n          var _date2 = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(_day2);\n\n          $(\".day[data-date=\\\"\".concat(_date2, \"\\\"]\")).remove();\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    } // Set out remaining out-of-scope days\n\n\n    for (var _i2 = 0, _toSetOut = toSetOut; _i2 < _toSetOut.length; _i2++) {\n      var _day3 = _toSetOut[_i2];\n\n      var _date3 = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(_day3);\n\n      $(\".day[data-date=\\\"\".concat(_date3, \"\\\"]\")).addClass('out');\n    }\n\n    this.buildCalendarHead();\n  },\n  newCalendar: function newCalendar(calendar) {\n    var id = calendar ? calendar.id : ++this.calendarID;\n    var title = calendar ? calendar.title : \"Calendar \".concat($('.calendars-wrap .calendar').length + 1);\n    var order = calendar ? calendar.order : $('.calendars-wrap .calendar').length;\n    var description = calendar ? calendar.description : 'Add a description'; // Create HTML\n\n    var html = \"<div class=\\\"calendar sortable\\\" data-id=\\\"\".concat(id, \"\\\">\\n            <div class=\\\"tools\\\">\\n                <i data-tool=\\\"toggle\\\" class=\\\"far fa-eye\\\" data-tooltip=\\\"Hide<span class='shortcut'>\\u2318H</span>\\\" data-tooltip-side=\\\"right\\\"></i>\\n                <i data-tool=\\\"sort\\\" data-tooltip=\\\"Sort\\\" data-tooltip-side=\\\"right\\\">\\u22EE\\u22EE</i>\\n                <i data-tool=\\\"duplicate\\\" class=\\\"far fa-clone\\\" data-tooltip=\\\"Duplicate<span class='shortcut'>\\u2318D</span>\\\" data-tooltip-side=\\\"right\\\"></i>\\n                <i data-tool=\\\"delete\\\" class=\\\"far fa-trash-alt\\\" data-tooltip=\\\"Delete<span class='shortcut'>\\u2318\\u232B</span>\\\" data-tooltip-side=\\\"right\\\"></i>\\n            </div>\\n            <div class=\\\"content\\\">\").concat(this.buildCalendar(), \"</div>\\n            <p><span contenteditable spellcheck=\\\"false\\\">\").concat(title, \"</span></p>\\n        </div>\");\n    var $calendar;\n\n    if (order) {\n      $('.calendars-wrap .calendar').eq(order - 1).after(html);\n      $calendar = $('.calendars-wrap .calendar').eq(order);\n    } else {\n      $('.calendars-wrap .calendars').append(html);\n      $calendar = $('.calendars-wrap .calendar:last-child');\n    } // Select new calendar\n\n\n    this.selectCalendar($calendar); // Update linear view\n\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].linearView(); // Save data\n\n    this.all.push({\n      id: id,\n      title: title,\n      description: description,\n      order: order,\n      events: []\n    }); // Build events (for calendar duplication)\n\n    if (calendar && calendar.events) {\n      var _iterator6 = _createForOfIteratorHelper(calendar.events),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var event = _step6.value;\n          _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].buildEvent(_objectSpread(_objectSpread({}, event), {}, {\n            calendar: id\n          }));\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  duplicateCalendar: function duplicateCalendar($calendar) {\n    var calendar = {\n      id: ++this.calendarID,\n      title: \"\".concat($calendar.find('p span').text(), \" copy\"),\n      order: $calendar.index() + 1,\n      events: this.getEventsById(parseInt($calendar.attr('data-id'))).map(function (d) {\n        return _objectSpread(_objectSpread({}, d), {}, {\n          id: ++_events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].eventID\n        });\n      }) // Reindex all events\n\n    };\n    this.newCalendar(calendar); // Unselect any selection\n\n    window.getSelection().removeAllRanges();\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].linearView();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  selectCalendar: function selectCalendar($calendar, selectedFirst, selectedLast) {\n    var _this2 = this;\n\n    this.selected = parseInt($calendar.attr('data-id')); // Store .selected-first and .selected-last dates if not passed\n\n    if (!selectedFirst) selectedFirst = $('.selected-first').attr('data-date');\n    if (!selectedLast) selectedLast = $('.selected-last').attr('data-date'); // Update minicals UI\n\n    $('.calendars-wrap .calendar.selected').removeClass('selected');\n    $calendar.addClass('selected');\n\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) {\n      // Select calendar\n      $('.calendar-wrap .calendar.selected').removeClass('selected');\n      $(\".calendar-wrap .calendar[data-id=\\\"\".concat($calendar.attr('data-id'), \"\\\"]\")).addClass('selected');\n    } else {\n      var _this$all, _this$all$find;\n\n      // Update ID\n      $('.calendar-wrap .content').attr('data-id', $calendar.attr('data-id')); // Update title\n\n      $('.calendar-wrap .title h2').html($calendar.find('p span').html());\n      $('.calendar-wrap .title span').html((_this$all = this.all) === null || _this$all === void 0 ? void 0 : (_this$all$find = _this$all.find(function (d) {\n        return d.id === _this2.selected;\n      })) === null || _this$all$find === void 0 ? void 0 : _this$all$find.description); // Update main calendar\n\n      $('.calendar-wrap .content').html($calendar.find('.content').html()).addClass('selected');\n    } // Unselect any selection\n\n\n    window.getSelection().removeAllRanges();\n    _selection__WEBPACK_IMPORTED_MODULE_4__[\"default\"].highlightSelection(); // Restore .selected-first and .selected-last classes\n\n    $('.selected-first, .selected-last').removeClass('selected-first selected-last');\n    $(\".calendar-wrap .calendar.selected .day[data-date=\\\"\".concat(selectedFirst, \"\\\"]\")).addClass('selected-first');\n    $(\".calendar-wrap .calendar.selected .day[data-date=\\\"\".concat(selectedLast, \"\\\"]\")).addClass('selected-last');\n    this.updateCalendarHeight();\n    _stats__WEBPACK_IMPORTED_MODULE_5__[\"default\"].update();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  getSelectedCalendars: function getSelectedCalendars() {\n    if (this.editAll) return Object.values(this.all).map(function (d) {\n      return d.id;\n    });else return [this.selected];\n  },\n  renameCalendar: function renameCalendar(val) {\n    var $calendar = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var id;\n\n    if ($calendar) {\n      // Edited in sidebar, replace in main\n      if ($calendar.hasClass('selected')) {\n        $('.calendar-wrap h2').text(val);\n      }\n\n      id = parseInt($calendar.attr('data-id'));\n    } else {\n      // Edited in main, replace in sidebar\n      $('.calendars-wrap .calendar.selected p span').text(val);\n      id = parseInt($('.calendars-wrap .calendar.selected').attr('data-id'));\n    } // Save data\n\n\n    this.all.find(function (c) {\n      return c.id === id;\n    }).title = val;\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  toggleCalendar: function toggleCalendar($calendar) {\n    $calendar.toggleClass('hidden');\n\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) {\n      $calendar.css('transition', 'none');\n      $(\".calendar-wrap .calendar[data-id=\\\"\".concat($calendar.attr('data-id'), \"\\\"]\")).toggleClass('hidden').find('.day').css('transition', 'none');\n      setTimeout(function () {\n        $calendar.css('transition', '');\n        $(\".calendar-wrap .calendar[data-id=\\\"\".concat($calendar.attr('data-id'), \"\\\"] .day\")).css('transition', '');\n      }, 500);\n    }\n\n    this.selectAnotherCalendar($calendar);\n  },\n  deleteCalendar: function deleteCalendar($calendar) {\n    this.selectAnotherCalendar($calendar);\n    $calendar.remove();\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].linearView(); // Update data\n\n    var calendar = this.all.find(function (e) {\n      return e.id === parseInt($calendar.attr('data-id'));\n    });\n    this.all.splice(this.all.indexOf(calendar), 1);\n    this.reorder();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n    _tooltip__WEBPACK_IMPORTED_MODULE_6__[\"default\"].hide();\n  },\n  selectPreviousCalendar: function selectPreviousCalendar() {\n    // Find selected calendar\n    var $calendar = $('.calendars-wrap .calendar.selected'); // Unselect it\n\n    $calendar.removeClass('selected'); // Select previous visible calendar\n\n    if ($calendar.prevAll('.calendar:not(.hidden)').length) $calendar = $calendar.prevAll('.calendar:not(.hidden)').eq(0); // Else, select last visible calendar\n    else $calendar = $('.calendars-wrap .calendar:not(.hidden)').last();\n    this.selectCalendar($calendar);\n  },\n  selectNextCalendar: function selectNextCalendar() {\n    // Find selected calendar\n    var $calendar = $('.calendars-wrap .calendar.selected'); // Unselect it\n\n    $calendar.removeClass('selected'); // Select next visible calendar\n\n    if ($calendar.nextAll('.calendar:not(.hidden)').length) $calendar = $calendar.nextAll('.calendar:not(.hidden)').eq(0); // Else, select first visible calendar\n    else $calendar = $('.calendars-wrap .calendar:not(.hidden)').first();\n    this.selectCalendar($calendar);\n  },\n  selectFirstCalendar: function selectFirstCalendar() {\n    var $calendar = $('.calendars-wrap .calendar').eq(0);\n    this.selectCalendar($calendar);\n  },\n  selectAnotherCalendar: function selectAnotherCalendar($calendar) {\n    // Select next (or previous) visible calendar\n    if ($calendar.hasClass('selected')) {\n      var $calendarToSelect = $calendar.nextAll(':not(.hidden)').eq(0).length ? $calendar.nextAll(':not(.hidden)').eq(0) : $calendar.prevAll(':not(.hidden)').length ? $calendar.prevAll(':not(.hidden)').eq(0) : null;\n      if ($calendarToSelect) this.selectCalendar($calendarToSelect);\n    }\n  },\n  getCalendarHeight: function getCalendarHeight() {\n    var height = Math.max.apply(Math, _toConsumableArray($('.calendar-wrap .event').map(function (_, el) {\n      return parseInt($(el).css('top'));\n    }))) + 68;\n    if (!isFinite(height)) height = 68;\n    return height;\n  },\n  updateCalendarHeight: function updateCalendarHeight(height) {\n    if (!height) height = this.getCalendarHeight();\n    $('.calendar-wrap .day').css('height', \"\".concat(height, \"px\"));\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) $('.calendars-wrap .calendar').css('height', \"\".concat(height, \"px\"));else $('.calendars-wrap .calendar').css('height', '');\n  },\n  getEventsById: function getEventsById(id) {\n    return this.all.find(function (c) {\n      return c.id === id;\n    }).events;\n  },\n  reorder: function reorder() {\n    // Update linear view\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].linearView();\n    this.all.forEach(function (c) {\n      return c.order = parseInt($(\".calendars-wrap .calendar[data-id=\\\"\".concat(c.id, \"\\\"]\")).attr('data-order'));\n    });\n  }\n});\n\n//# sourceURL=webpack:///./src/js/calendars.js?");

/***/ }),

/***/ "./src/js/data.js":
/*!************************!*\
  !*** ./src/js/data.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _toast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./toast */ \"./src/js/toast.js\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui */ \"./src/js/ui.js\");\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  loading: false,\n  loaded: false,\n  init: function init() {\n    var data = localStorage.getItem('data');\n    if (!data) return;\n    data = JSON.parse(data);\n    this.load(data);\n  },\n  load: function load(data) {\n    this.loading = true;\n    _ui__WEBPACK_IMPORTED_MODULE_3__[\"default\"].changeTool(data.selectedTool);\n    if (data.view === 'linear') _ui__WEBPACK_IMPORTED_MODULE_3__[\"default\"].linearView();\n    if (data.start) $('#start').val(data.start);\n    if (data.end) $('#end').val(data.end);\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getStartEnd();\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].buildCalendarHead(); // Add events\n\n    var _iterator = _createForOfIteratorHelper(data.events.sort(function (a, b) {\n      return a.order < b.order ? -1 : 1;\n    })),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var event = _step.value;\n        _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].newEvent(event);\n      } // Add calendars\n\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    var _iterator2 = _createForOfIteratorHelper(data.calendars.sort(function (a, b) {\n      return a.order < b.order ? -1 : 1;\n    })),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var calendar = _step2.value;\n        _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].newCalendar(calendar);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectCalendar($(\".calendars-wrap .calendar[data-id=\\\"\".concat(data.selectedCalendar, \"\\\"]\"))); // Save current ids\n\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].calendarID = Math.max.apply(Math, _toConsumableArray(data.calendars.map(function (c) {\n      return c.id;\n    })).concat([-1]));\n    _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventID = Math.max.apply(Math, _toConsumableArray(data.calendars.map(function (c) {\n      return c.events.map(function (e) {\n        return e.id;\n      });\n    }).flat()).concat([-1]));\n    _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].type = Math.max.apply(Math, _toConsumableArray(data.events.map(function (e) {\n      return e.type;\n    })).concat([-1])); // Hide days if necessary\n\n    if (data.daysShown) {\n      var _iterator3 = _createForOfIteratorHelper(data.daysShown.entries()),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _step3$value = _slicedToArray(_step3.value, 2),\n              day = _step3$value[0],\n              show = _step3$value[1];\n\n          if (!show) _ui__WEBPACK_IMPORTED_MODULE_3__[\"default\"].showHideWeekday(day, show);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n\n    this.loading = false;\n    this.loaded = true;\n  },\n  save: function save() {\n    var manual = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    // Prevent saving while loading\n    if (this.loading) return false;\n    var data = this.getData();\n    localStorage.setItem('data', JSON.stringify(data));\n\n    if (manual) {\n      _toast__WEBPACK_IMPORTED_MODULE_2__[\"default\"].show('Saved!<br><span class=\"small\">Planner autosaves your work ✨</span>'); // Prevent default browser save window (Cmd + S)\n\n      return false;\n    }\n  },\n  getData: function getData() {\n    var data = {\n      start: $('#start').val(),\n      end: $('#end').val(),\n      events: _toConsumableArray(_events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].all),\n      calendars: _toConsumableArray(_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all),\n      selectedCalendar: _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selected,\n      selectedTool: _ui__WEBPACK_IMPORTED_MODULE_3__[\"default\"].tool,\n      view: _ui__WEBPACK_IMPORTED_MODULE_3__[\"default\"].view,\n      daysShown: _ui__WEBPACK_IMPORTED_MODULE_3__[\"default\"].daysShown\n    };\n    return data;\n  },\n  clear: function clear() {\n    // For development purposes only\n    localStorage.removeItem('data');\n  },\n  download: function download() {\n    var data = this.getData();\n    var a = document.createElement('a');\n    a.href = \"data:text/json;charset=utf-8,\".concat(encodeURIComponent(JSON.stringify(data)));\n    a.download = 'project.planner';\n    a.click();\n  },\n  open: function open() {\n    var _this = this;\n\n    var input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.planner';\n    input.addEventListener('change', function (e) {\n      var file = e.target.files[0];\n      var reader = new FileReader();\n      reader.addEventListener('load', function (_e) {\n        var result = _e.target.result;\n        var data = JSON.parse(result);\n\n        _this.reset();\n\n        _this.load(data);\n\n        _this.save();\n\n        $('header ul li.open').removeClass('open');\n      });\n      reader.readAsText(file);\n    });\n    input.click();\n  },\n  reset: function reset() {\n    _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reset();\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reset();\n  }\n});\n\n//# sourceURL=webpack:///./src/js/data.js?");

/***/ }),

/***/ "./src/js/dates.js":
/*!*************************!*\
  !*** ./src/js/dates.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  init: function init() {\n    Date.prototype.getWeek = function () {\n      var dowOffset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var newYear = new Date(this.getFullYear(), 0, 1);\n      var day = newYear.getDay() - dowOffset;\n      day = day >= 0 ? day : day + 7;\n      var daynum = Math.floor((this.getTime() - newYear.getTime() - (this.getTimezoneOffset() - newYear.getTimezoneOffset()) * 60000) / 86400000) + 1;\n      var weeknum;\n\n      if (day < 4) {\n        weeknum = Math.floor((daynum + day - 1) / 7) + 1;\n\n        if (weeknum > 52) {\n          var nYear = new Date(this.getFullYear() + 1, 0, 1);\n          var nday = nYear.getDay() - dowOffset;\n          nday = nday >= 0 ? nday : nday + 7;\n          weeknum = nday < 4 ? 1 : 53;\n        }\n      } else {\n        weeknum = Math.floor((daynum + day - 1) / 7);\n      }\n\n      return weeknum;\n    };\n  },\n  toString: function toString(date) {\n    return \"\".concat(date.getFullYear(), \"-\").concat(\"\".concat(date.getMonth() + 1).padStart(2, '0'), \"-\").concat(\"\".concat(date.getDate()).padStart(2, '0'));\n  },\n  isInArray: function isInArray(arr, date) {\n    return arr.some(function (d) {\n      return d.getTime() === date.getTime();\n    });\n  },\n  isInRange: function isInRange(start, end, date) {\n    return this.isInArray(this.range(start, end), date);\n  },\n  relativeDate: function relativeDate(date, n) {\n    return new Date(new Date(date).setDate(new Date(date).getDate() + n));\n  },\n  relativeFirstWeekDay: function relativeFirstWeekDay(date) {\n    return new Date(new Date(date).setDate(date.getDate() - date.getDay() + (date.getDay() === 0 ? -6 : 1)));\n  },\n  relativeLastWeekDay: function relativeLastWeekDay(date) {\n    return new Date(new Date(date).setDate(date.getDay() === 0 ? date.getDate() : date.getDate() + 7 - date.getDay()));\n  },\n  // Build array of all days from start to end\n  range: function range(start, end) {\n    var days = [new Date(start)];\n\n    while (days[days.length - 1] < new Date(end)) {\n      days.push(new Date(new Date(days[days.length - 1].valueOf()).setDate(days[days.length - 1].getDate() + 1)));\n    }\n\n    return days;\n  },\n  findLowestWeekDay: function findLowestWeekDay(arr) {\n    return Math.min.apply(Math, _toConsumableArray(arr.map(function (d) {\n      return d.getDay();\n    }).map(function (w) {\n      return w === 0 ? 7 : w;\n    })));\n  },\n  findHighestWeekDay: function findHighestWeekDay(arr) {\n    return Math.max.apply(Math, _toConsumableArray(arr.map(function (d) {\n      return d.getDay();\n    }).map(function (w) {\n      return w === 0 ? 7 : w;\n    })));\n  },\n  toWeeksArray: function toWeeksArray(days) {\n    var weeks = days.reduce(function (acc, curr) {\n      if (!acc.length) {\n        acc = [[curr]];\n      } else {\n        var lastWeek = acc[acc.length - 1];\n        if (curr.getWeek() === lastWeek[lastWeek.length - 1].getWeek() || curr.getWeek() === 0) lastWeek.push(curr);else acc.push([curr]);\n      }\n\n      return acc;\n    }, []);\n    return weeks;\n  },\n  delta: function delta(date1, date2) {\n    return Math.ceil((new Date(date2) - new Date(date1)) / (1000 * 60 * 60 * 24));\n  }\n});\n\n//# sourceURL=webpack:///./src/js/dates.js?");

/***/ }),

/***/ "./src/js/events.js":
/*!**************************!*\
  !*** ./src/js/events.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _dates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dates */ \"./src/js/dates.js\");\n/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./history */ \"./src/js/history.js\");\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./selection */ \"./src/js/selection.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./settings */ \"./src/js/settings.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./stats */ \"./src/js/stats.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  all: [],\n  eventID: -1,\n  type: -1,\n  reset: function reset() {\n    this.all = [];\n    this.eventID = -1;\n    this.type = -1;\n    $('.events-wrap ul').empty();\n    $('.stats-wrap .stats').empty();\n  },\n  init: function init() {\n    var _this = this;\n\n    // Add new event\n    $(document).on('click', '.events-wrap .add', function () {\n      _this.newEvent();\n\n      return false;\n    }); // Rename event\n\n    $(document).on('input', '.events-wrap ul span', function (e) {\n      var $el = $(e.target);\n\n      _this.renameEvent($el);\n    }); // Insert event instances\n\n    $(document).on('click', '.events-wrap ul li', function (e) {\n      var $el = $(e.target);\n      if ($el.is('.tools') || $el.parents().is('.tools')) return;\n      var $event = $el.closest('li');\n      var type = parseInt($event.attr('data-type'));\n\n      _this.insertEvent(type);\n    }); // Open dropdown menu\n\n    $(document).on('click', '.events-wrap ul li [data-tool=\"dropdown\"]', function (e) {\n      // Close any open dropdown menu\n      $('.dropdown.visible').removeClass('visible');\n      $('#color-swatch').removeClass('visible');\n      var $dropdown = $(e.target).closest('li').find('.dropdown');\n      $dropdown.toggleClass('visible');\n      e.stopPropagation();\n    }); // Click outside\n\n    $(document).on('click', function (e) {\n      if ($(e.target).is('#color-swatch')) return; // Close dropdown menu\n\n      $('.dropdown.visible').removeClass('visible');\n      $('[data-day].open').removeClass('open');\n      $('#color-swatch').removeClass('visible');\n      if ($(e.target).parents().is('[data-tool=\"dropdown\"], .dropdown')) return; // Remove contenteditable attr\n\n      $('.events-wrap ul li .title[contenteditable]').removeAttr('contenteditable'); // Unselect any selection\n\n      if (!$(e.target).is('[contenteditable]')) window.getSelection().removeAllRanges();\n    }); // Save event rename on blur (for empty names)\n\n    $(document).on('blur', '.events-wrap .title', function (e) {\n      _this.renameEvent($(e.currentTarget));\n    }); // Rename event\n\n    $(document).on('click', '.events-wrap ul li [data-tool=\"rename\"]', function (e) {\n      var $title = $(e.target).closest('li').find('span.title');\n      $title.attr('contenteditable', 'true').focus();\n\n      var setEndOfContenteditable = function setEndOfContenteditable(contentEditableElement) {\n        var range = document.createRange();\n        range.selectNodeContents(contentEditableElement);\n        range.collapse(false);\n        var selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n      };\n\n      setEndOfContenteditable($title[0]); // Close dropdown menu\n\n      $('.dropdown.visible').removeClass('visible'); // Prevent li click\n\n      return false;\n    }); // Open color swatch\n\n    $(document).on('click', '.events-wrap ul li [data-tool=\"color\"]', function (e) {\n      var $el = $(e.target.closest('li')); // Select current event color\n\n      $('#color-swatch .color.selected').removeClass('selected');\n      $($('#color-swatch .color').toArray().find(function (c) {\n        return $(c).attr('data-color') === $el.attr('data-color');\n      })).addClass('selected'); // Open swatch\n\n      $('#color-swatch').css({\n        'top': $el.position().top + $el.outerHeight(),\n        'left': $el.position().left\n      }).addClass('visible').attr('data-type', $el.attr('data-type')); // Close dropdown\n\n      $('.dropdown.visible').removeClass('visible');\n      return false;\n    }); // Change event color\n\n    $(document).on('click', '#color-swatch .color', function (e) {\n      var $color = $(e.target);\n      var eventType = parseInt($('#color-swatch').attr('data-type')); // Select color\n\n      $('#color-swatch .color.selected').removeClass('selected');\n      $color.addClass('selected'); // Update event, occurences and stats\n\n      var color = $color.attr('data-color');\n      $(\".events-wrap ul li[data-type=\\\"\".concat(eventType, \"\\\"], .event[data-type=\\\"\").concat(eventType, \"\\\"]\")).attr('data-color', color);\n      $(\".stat[data-type=\\\"\".concat(eventType, \"\\\"] .event-icon\")).attr('data-color', color); // Update data\n\n      _this.all.find(function (e) {\n        return e.type === eventType;\n      }).color = parseInt($color.attr('data-color'));\n      _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n      return false;\n    }); // Delete event\n\n    $(document).on('click', '.events-wrap ul li [data-tool=\"delete\"]', function (e) {\n      var $event = $(e.target).closest('li');\n      var type = parseInt($event.attr('data-type'));\n      var event = {\n        title: $event.find('.title').text(),\n        type: type,\n        index: $event.index(),\n        color: $event.attr('data-color')\n      };\n\n      _this.deleteEvent(type);\n\n      _this.removeEventsByType(type, event);\n    }); // Selected event\n    // $(document).on('mousedown', '.events-wrap ul li', e => {\n    //     const $el = $(e.currentTarget);\n    //     $el.siblings('.selected').removeClass('selected');\n    //     $el.toggleClass('selected');\n    // });\n\n    for (var i = 0; i <= 19; i += 1) {\n      $('#color-swatch').append(\"<div class=\\\"color\\\" data-color=\\\"\".concat(i, \"\\\"></div>\"));\n    }\n  },\n  newEvent: function newEvent(events) {\n    if (!Array.isArray(events)) events = [events];\n\n    var _iterator = _createForOfIteratorHelper(events),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var event = _step.value;\n        this.type++;\n        var type = event && !isNaN(event.type) ? event.type : this.type;\n        var color = event && !isNaN(event.color) ? event.color : type;\n        var li = \"<li data-type=\\\"\".concat(type, \"\\\" class=\\\"sortable\\\" data-color=\\\"\").concat(color, \"\\\">\\n                <span class=\\\"title\\\" \").concat(!event ? 'contenteditable' : '', \" spellcheck=\\\"false\\\">\").concat(event && event.title ? event.title : '', \"</span>\\n                <span class=\\\"tools\\\">\\n                    <i class=\\\"fas fa-angle-down\\\" data-tool=\\\"dropdown\\\"></i>\\n                    <i data-tool=\\\"sort\\\">\\u22EE\\u22EE</i>\\n                    <span class=\\\"dropdown\\\">\\n                        <span data-tool=\\\"rename\\\"><i class=\\\"fas fa-pen\\\"></i>Rename</span>\\n                        <span data-tool=\\\"color\\\"><i class=\\\"fas fa-palette\\\"></i>Change color</span>\\n                        <span class=\\\"border-top\\\" data-tool=\\\"delete\\\"><i class=\\\"far fa-trash-alt\\\"></i>Delete</span>\\n                    </span>\\n                </span>\\n            </li>\");\n        var $ul = $('.events-wrap ul');\n        if (event.index) $ul.find('li').eq(event.index - 1).after(li);else if (event.index === 0) $ul.prepend(li);else $ul.append(li); // Select new event\n        // $ul.find('li.selected').removeClass('selected');\n        // $ul.find('li:last-child').addClass('selected');\n        // Focus span if empty\n\n        if (!event) $ul.find('li:last-child .title').focus(); // Save data\n\n        this.all.push(_objectSpread(_objectSpread({}, event), {}, {\n          type: type,\n          color: color\n        }));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update();\n  },\n  renameEvent: function renameEvent($el) {\n    var val = $el.text();\n    var type = parseInt($el.closest('li').attr('data-type'));\n    $(\".event[data-type=\\\"\".concat(type, \"\\\"] span\")).text(val); // Update data\n\n    this.all.find(function (e) {\n      return e.type === type;\n    }).title = val;\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  deleteEvent: function deleteEvent(type) {\n    var $event = $(\".events-wrap ul li[data-type=\\\"\".concat(type, \"\\\"]\"));\n    $event.remove();\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update(); // Update data\n\n    var _e = this.all.find(function (e) {\n      return e.type === type;\n    });\n\n    this.all.splice(this.all.indexOf(_e), 1);\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  insertEvent: function insertEvent(type) {\n    var action = {\n      type: 'addEvents',\n      events: []\n    };\n\n    var _iterator2 = _createForOfIteratorHelper(_selection__WEBPACK_IMPORTED_MODULE_4__[\"default\"].selectedDays),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var day = _step2.value;\n        var date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day); // Edit selected calendar(s)\n\n        var _iterator3 = _createForOfIteratorHelper(_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getSelectedCalendars()),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var calendarID = _step3.value;\n            var event = {\n              id: ++this.eventID,\n              calendar: calendarID,\n              type: type,\n              start: date,\n              end: date\n            };\n            this.buildEvent(event);\n            action.events.push(event);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    _history__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pushAction(action);\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  getEventsWrap: function getEventsWrap(event, day) {\n    var date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(new Date(day));\n    var $el; // if (calendars.editAll) {\n    //     $el = $(`.day[data-date=\"${date}\"] .events`);\n    // } else {\n\n    $el = $(\".calendar[data-id=\\\"\".concat(event.calendar, \"\\\"]\")).length ? $(\".calendar[data-id=\\\"\".concat(event.calendar, \"\\\"] .day[data-date=\\\"\").concat(date, \"\\\"] .events\")) : $(\".calendar.selected .day[data-date=\\\"\".concat(date, \"\\\"] .events, .calendar-wrap .day[data-date=\\\"\").concat(date, \"\\\"] .events\")); // }\n\n    return $el;\n  },\n  getEventTopCoordinate: function getEventTopCoordinate(event) {\n    var _this2 = this;\n\n    var range = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(event.start, event.end); // Get first available top coordinate for multi-days event\n\n    var top = new Array(32).fill(0).map(function (d) {\n      return d;\n    }).findIndex(function (_, i) {\n      return range.map(function (day) {\n        var events = _this2.getEventsWrap(event, day).eq(0).find(\".event[data-id!=\\\"\".concat(event.id, \"\\\"]\")).toArray();\n\n        return events.every(function (ev) {\n          return parseInt($(ev).css('top')) !== i * 32;\n        });\n      }).every(function (d) {\n        return d;\n      });\n    });\n    return top;\n  },\n  buildEvent: function buildEvent(event) {\n    var updateHeight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var range = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(event.start, event.end);\n    var top = this.getEventTopCoordinate(event);\n\n    var _iterator4 = _createForOfIteratorHelper(range),\n        _step4;\n\n    try {\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        var day = _step4.value;\n        var $events = this.getEventsWrap(event, day); // Build classname\n\n        var classname = '';\n        if (day.valueOf() === new Date(event.start).valueOf()) classname += ' start';\n        if (day.valueOf() === new Date(event.end).valueOf()) classname += ' end';\n        var eventType = void 0;\n\n        if (event.type === undefined) {\n          eventType = {\n            title: '',\n            color: 17\n          };\n          classname += ' new';\n        } else {\n          eventType = this.all.find(function (e) {\n            return e.type === event.type;\n          });\n        } // Find title and color from event\n\n\n        var _eventType = eventType,\n            title = _eventType.title,\n            color = _eventType.color;\n        var html = \"<div data-id=\\\"\".concat(event.id, \"\\\" data-type=\\\"\").concat(event.type, \"\\\" data-color=\\\"\").concat(color, \"\\\" class=\\\"event\").concat(classname, \"\\\" style=\\\"top: \").concat(top * 32, \"px\\\">\\n                \").concat(classname.includes('start') || day.getDay() === 1 ? \"<span class=\\\"title\".concat(!classname.includes('start') ? ' not-linear' : '', \"\\\">\").concat(title, \"</span>\") : '', \"\\n                \").concat(classname.includes('start') ? '<div class=\"anchor anchor-start\"></div>' : '', \"\\n                \").concat(classname.includes('end') ? '<div class=\"anchor anchor-end\"></div>' : '', \"\\n            </div>\"); // Add event\n\n        $events.append(html);\n      } // Save data\n\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n\n    var id = event.id,\n        type = event.type,\n        start = event.start,\n        end = event.end;\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all.find(function (c) {\n      return c.id === event.calendar;\n    }).events.push({\n      id: id,\n      type: type,\n      start: start,\n      end: end\n    });\n    if (updateHeight) _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight();\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update();\n  },\n  getAllEvents: function getAllEvents() {\n    var events = [];\n\n    for (var _i = 0, _Object$values = Object.values(_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all); _i < _Object$values.length; _i++) {\n      var calendar = _Object$values[_i];\n\n      var _iterator5 = _createForOfIteratorHelper(calendar.events),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var event = _step5.value;\n          events.push(_objectSpread(_objectSpread({}, event), {}, {\n            calendar: calendar.id\n          }));\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n\n    return events;\n  },\n  findEvents: function findEvents(options) {\n    var events = this.getAllEvents(); // Filter events\n\n    if (options.calendars) events = events.filter(function (e) {\n      return options.calendars.includes(e.calendar);\n    });\n    if (options.days) events = events.filter(function (e) {\n      return options.days.some(function (d) {\n        return _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isInRange(e.start, e.end, d);\n      });\n    });\n    if (!isNaN(options.type)) events = events.filter(function (e) {\n      return e.type === options.type;\n    });\n    return events;\n  },\n  updateEvent: function updateEvent(event, updateHeight) {\n    this.removeEvent(event, updateHeight);\n    this.buildEvent(event, updateHeight);\n  },\n  replaceEvent: function replaceEvent(event) {\n    var undo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var $el = $(\".event[data-id=\\\"\".concat(event.id, \"\\\"]\"));\n    var to = undo ? event.from : event.type;\n    var $target = $(\".events-wrap ul li[data-type=\\\"\".concat(to, \"\\\"]\"));\n    $el.find('.title').text($target.find('.title').text());\n    $el.attr('data-type', $target.attr('data-type'));\n    $el.attr('data-color', $target.attr('data-color')); // Update data\n\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all.find(function (c) {\n      return c.id === event.calendar;\n    }).events.find(function (e) {\n      return e.id === event.id;\n    }).type = to;\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update();\n  },\n  removeEvent: function removeEvent(event) {\n    var updateHeight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    $(\".event[data-id=\\\"\".concat(event.id, \"\\\"]\")).remove();\n    var oldEvent = _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all.map(function (c) {\n      return c.events;\n    }).flat().find(function (e) {\n      return e.id === event.id;\n    });\n    var start = oldEvent ? Math.min(new Date(oldEvent.start), new Date(event.start)) : event.start;\n    var end = oldEvent ? Math.max(new Date(oldEvent.end), new Date(event.end)) : event.end; // Find all events to update top coordinate for\n\n    var range = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end);\n    var eventIDs = new Set();\n\n    var _iterator6 = _createForOfIteratorHelper(range),\n        _step6;\n\n    try {\n      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n        var day = _step6.value;\n        var $events = this.getEventsWrap(event, day);\n        $events.find('.event').each(function (_, el) {\n          var $el = $(el);\n          var id = parseInt($el.attr('data-id'));\n          eventIDs.add(id);\n        });\n      }\n    } catch (err) {\n      _iterator6.e(err);\n    } finally {\n      _iterator6.f();\n    }\n\n    var _iterator7 = _createForOfIteratorHelper(eventIDs),\n        _step7;\n\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var id = _step7.value;\n        var _event = {\n          id: id,\n          start: $(\".event[data-id=\\\"\".concat(id, \"\\\"].start\")).eq(0).closest('.day').attr('data-date'),\n          end: $(\".event[data-id=\\\"\".concat(id, \"\\\"].end\")).eq(0).closest('.day').attr('data-date'),\n          calendar: parseInt($(\".event[data-id=\\\"\".concat(id, \"\\\"].start\")).eq(0).closest('.calendar').attr('data-id'))\n        }; // Update top coordinate\n\n        var top = this.getEventTopCoordinate(_event);\n        $(\".event[data-id=\\\"\".concat(id, \"\\\"]\")).css('top', top * 32);\n      }\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n\n    if (updateHeight) _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight(); // Update data\n\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all.forEach(function (c) {\n      return c.events = c.events.filter(function (e) {\n        return e.id !== event.id;\n      });\n    });\n  },\n  removeEventsByType: function removeEventsByType(type, event) {\n    var _this3 = this;\n\n    // Create action for history\n    var action = {\n      type: 'removeEvents',\n      events: []\n    };\n\n    if (event) {\n      action.deleted = true;\n      action.event = event;\n    }\n\n    var _iterator8 = _createForOfIteratorHelper($('.calendars-wrap .calendar').toArray()),\n        _step8;\n\n    try {\n      var _loop = function _loop() {\n        var minical = _step8.value;\n        var $events = $(minical).find(\".event[data-type=\\\"\".concat(type, \"\\\"]\"));\n        $events.each(function (_, el) {\n          var $el = $(el);\n          var event = {\n            id: parseInt($el.attr('data-id')),\n            calendar: parseInt($(minical).attr('data-id')),\n            type: parseInt($el.attr('data-type')),\n            // title: $el.find('.title').text(),\n            // color: $el.css('background-color'),\n            start: $el.closest('.day').attr('data-date'),\n            end: $el.closest('.day').attr('data-date')\n          }; // Remove event\n\n          _this3.removeEvent(event); // Save event in action\n\n\n          action.events.push(event);\n        });\n      };\n\n      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n        _loop();\n      } // Save action in history\n\n    } catch (err) {\n      _iterator8.e(err);\n    } finally {\n      _iterator8.f();\n    }\n\n    _history__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pushAction(action);\n  },\n  reorder: function reorder() {\n    this.all.forEach(function (e) {\n      return e.order = parseInt($(\".events-wrap ul li[data-type=\\\"\".concat(e.type, \"\\\"]\")).attr('data-order'));\n    });\n  }\n});\n\n//# sourceURL=webpack:///./src/js/events.js?");

/***/ }),

/***/ "./src/js/history.js":
/*!***************************!*\
  !*** ./src/js/history.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  actions: [],\n  actionsIndex: 0,\n  pushAction: function pushAction(action) {\n    this.actions.length = this.actionsIndex;\n    this.actions.push(action);\n    this.actionsIndex += 1;\n    this.updateNav('undo', -1);\n    this.updateNav('redo');\n  },\n  undo: function undo() {\n    if (this.actionsIndex - 1 < 0) return;\n    this.actionsIndex -= 1;\n    var action = this.actions[this.actionsIndex];\n\n    if (action.type.includes('Events')) {\n      if (action.deleted) _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].newEvent(action.event);\n\n      var _iterator = _createForOfIteratorHelper(action.events),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var event = _step.value;\n          if (action.type === 'addEvents') _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].removeEvent(event);else if (action.type === 'removeEvents') _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].buildEvent(event);else if (action.type === 'replaceEvents') _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].replaceEvent(event, true);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n\n    if (this.actionsIndex === 0) this.updateNav('undo');else this.updateNav('undo', -1);\n    this.updateNav('redo', 0);\n    _data__WEBPACK_IMPORTED_MODULE_0__[\"default\"].save();\n  },\n  redo: function redo() {\n    if (this.actionsIndex + 1 > this.actions.length) return;\n    var action = this.actions[this.actionsIndex];\n\n    if (action.type.includes('Events')) {\n      if (action.deleted) _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deleteEvent(action.event.type);\n\n      var _iterator2 = _createForOfIteratorHelper(action.events),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var event = _step2.value;\n          if (action.type === 'addEvents') _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].buildEvent(event);else if (action.type === 'removeEvents') _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].removeEvent(event);else if (action.type === 'replaceEvents') _events__WEBPACK_IMPORTED_MODULE_1__[\"default\"].replaceEvent(event);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n\n    this.actionsIndex += 1;\n    if (this.actions[this.actionsIndex]) this.updateNav('redo', 0);else this.updateNav('redo');\n    this.updateNav('undo', -1);\n    _data__WEBPACK_IMPORTED_MODULE_0__[\"default\"].save();\n  },\n  updateNav: function updateNav(type, actionIndex) {\n    var label = type === 'undo' ? 'Undo' : 'Redo';\n\n    if (isNaN(actionIndex)) {\n      // Disable nav undo/redo options\n      $(\"nav [data-tool=\\\"\".concat(type, \"\\\"]\")).text(label).addClass('disabled');\n    } else {\n      // Update nav undo/redo options text\n      var buildActionText = function buildActionText(action) {\n        var text;\n\n        if (action.type.includes('Events')) {\n          var n = action.events.length;\n          var s = n > 1 ? 's' : '';\n\n          if (action.deleted) {\n            text = \"delete event \".concat(action.event.title);\n          } else {\n            text = {\n              'addEvents': \"add \".concat(n, \" event\").concat(s),\n              'removeEvents': \"remove \".concat(n, \" event\").concat(s),\n              'replaceEvents': \"replace \".concat(n, \" event\").concat(s)\n            }[action.type];\n          }\n        }\n\n        return text;\n      };\n\n      var action = this.actions[this.actionsIndex + actionIndex];\n      var text = \"\".concat(label, \" \").concat(buildActionText(action));\n      $(\"nav [data-tool=\\\"\".concat(type, \"\\\"]\")).text(text).removeClass('disabled');\n    }\n  }\n});\n\n//# sourceURL=webpack:///./src/js/history.js?");

/***/ }),

/***/ "./src/js/inputs.js":
/*!**************************!*\
  !*** ./src/js/inputs.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./history */ \"./src/js/history.js\");\n/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./panel */ \"./src/js/panel.js\");\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./selection */ \"./src/js/selection.js\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ui */ \"./src/js/ui.js\");\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  capsLockIsDown: false,\n  isMouseDown: false,\n  init: function init() {\n    var _this = this;\n\n    // Store mouseclick status\n    $(document).on('mousedown', function () {\n      _this.isMouseDown = true;\n    });\n    $(document).on('mouseup', function () {\n      _this.isMouseDown = false;\n    }); // Shortcuts\n\n    $(document).on('keydown', function (e) {\n      // Capture caps lock\n      if (e.which === 20) _this.capsLock(e.originalEvent.getModifierState('CapsLock'));\n      if (e.which === 27 && $('.event.new').length) _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].cancelDraw(); // Escape new event\n      // Disable custom shortcuts when editing a contenteditable\n\n      if ($(e.target).is('[contenteditable]')) return;\n      var ctrlOrMeta = e.metaKey || e.ctrlKey;\n\n      if ([37, 38, 39, 40].includes(e.which)) {\n        // Arrow keys\n        // Prevent scroll\n        e.preventDefault();\n        if (_panel__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isOpen) return;\n\n        if (ctrlOrMeta && [38, 40].includes(e.which)) {\n          if (e.which === 38) _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectPreviousCalendar(); // Cmd + up\n\n          if (e.which === 40) _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectNextCalendar(); // Cmd + down\n        } else {\n          _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].moveSelection(e); // Cmd + right/left\n        }\n      } else if (e.which === 18 && _this.isMouseDown) _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].dragSelect(e); // Alt + click\n      else if (ctrlOrMeta && e.which === 8) {\n          // Cmd + backspace\n          var $calendar = $('.calendars-wrap .calendar.selected');\n          _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deleteCalendar($calendar);\n        } else if (e.which === 8) _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].emptySelection(); // Backspace\n        else if (e.which === 27) {\n            // Esc\n            if (_panel__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isOpen) _panel__WEBPACK_IMPORTED_MODULE_4__[\"default\"].closePanel();else _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].narrowSelection();\n          } else if (ctrlOrMeta && e.which === 65) _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].selectAll(); // Cmd + A\n          else if (ctrlOrMeta && e.which === 67) _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].copySelection(); // Cmd + C\n            else if (ctrlOrMeta && e.which === 68) {\n                // Cmd + D\n                var _$calendar = $('.calendars-wrap .calendar.selected');\n\n                _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].duplicateCalendar(_$calendar);\n                return false;\n              } else if (ctrlOrMeta && e.which === 72) {\n                // Cmd + H\n                var _$calendar2 = $('.calendars-wrap .calendar.selected');\n\n                _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].toggleCalendar(_$calendar2);\n                return false;\n              } else if (ctrlOrMeta && e.which === 75) _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].clear(); // Cmd + K\n              else if (ctrlOrMeta && e.which === 83) return _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save(true); // Cmd + S\n                else if (ctrlOrMeta && e.which === 86) _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].pasteSelection(); // Cmd + V\n                  else if (ctrlOrMeta && e.which === 88) _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].cutSelection(); // Cmd + X\n                    else if (ctrlOrMeta && e.which === 90) {\n                        // Cmd + Z\n                        e.preventDefault();\n                        if (e.shiftKey) _history__WEBPACK_IMPORTED_MODULE_3__[\"default\"].redo();else _history__WEBPACK_IMPORTED_MODULE_3__[\"default\"].undo();\n                      } // else if (e.which === 67) ui.changeTool('comment');                    // C\n                      else if (e.which === 68) _ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"].changeTool('draw'); // D\n                        else if (e.which === 70) _ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"].fullView(); // F\n                          else if (e.which === 76) _ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"].linearView(); // L\n                            else if (e.which === 83) _ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"].changeTool('select'); // S\n\n    }); // Enter key in contenteditable: blur\n\n    $(document).on('keypress', '[contenteditable]', function (e) {\n      if (e.which === 13) {\n        var $el = $(e.target);\n        $el.blur();\n\n        if ($el.is('.calendar-wrap > .title > span')) {\n          _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all[_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getSelectedCalendars()].description = $el.text();\n          _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n        } // If leaving an event title, remove contenteditable\n\n\n        if ($el.is('.title')) $el.removeAttr('contenteditable'); // Remove selection if any\n\n        window.getSelection().removeAllRanges(); // Prevent panel opening\n\n        return false;\n      }\n    });\n    $(document).on('keyup', function (e) {\n      if (e.which === 18 && _this.isMouseDown) _selection__WEBPACK_IMPORTED_MODULE_5__[\"default\"].dragSelect(e); // Capture caps lock (unlock)\n      else if (e.which === 20) _this.capsLock(e.originalEvent.getModifierState('CapsLock'));\n    }); // // Click on contenteditable: select all\n    // $(document).on('click', '[contenteditable]', e => {\n    //     document.execCommand('selectAll', false, null);\n    // });\n    // // Tab to contenteditable: select all\n    // $(document).on('keyup', '[contenteditable]', e => {\n    //     if (e.which === 9) document.execCommand('selectAll', false, null);\n    // });\n  },\n  capsLock: function capsLock(isDown) {\n    // Save status\n    this.capsLockIsDown = isDown;\n\n    if (isDown) {\n      $('.calendars-wrap').addClass('edit-all');\n      $('nav [data-tool=\"edit-all\"]').addClass('checked');\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editAll = true;\n    } else {\n      $('.calendars-wrap').removeClass('edit-all');\n      $('nav [data-tool=\"edit-all\"]').removeClass('checked');\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editAll = false;\n    }\n  }\n});\n\n//# sourceURL=webpack:///./src/js/inputs.js?");

/***/ }),

/***/ "./src/js/main.js":
/*!************************!*\
  !*** ./src/js/main.js ***!
  \************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _dates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dates */ \"./src/js/dates.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _inputs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./inputs */ \"./src/js/inputs.js\");\n/* harmony import */ var _newEvent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./newEvent */ \"./src/js/newEvent.js\");\n/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./panel */ \"./src/js/panel.js\");\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./selection */ \"./src/js/selection.js\");\n/* harmony import */ var _sortable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sortable */ \"./src/js/sortable.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./stats */ \"./src/js/stats.js\");\n/* harmony import */ var _templates__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./templates */ \"./src/js/templates.js\");\n/* harmony import */ var _toast__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./toast */ \"./src/js/toast.js\");\n/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./tooltip */ \"./src/js/tooltip.js\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ui */ \"./src/js/ui.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$(function () {\n  _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].init();\n  _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].init();\n  _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].init();\n  _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].init();\n  _inputs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].init();\n  _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].init();\n  _panel__WEBPACK_IMPORTED_MODULE_6__[\"default\"].init();\n  _selection__WEBPACK_IMPORTED_MODULE_7__[\"default\"].init();\n  _sortable__WEBPACK_IMPORTED_MODULE_8__[\"default\"].init();\n  _stats__WEBPACK_IMPORTED_MODULE_9__[\"default\"].init();\n  _templates__WEBPACK_IMPORTED_MODULE_10__[\"default\"].init();\n  _toast__WEBPACK_IMPORTED_MODULE_11__[\"default\"].init();\n  _tooltip__WEBPACK_IMPORTED_MODULE_12__[\"default\"].init();\n  _ui__WEBPACK_IMPORTED_MODULE_13__[\"default\"].init();\n});\n\n//# sourceURL=webpack:///./src/js/main.js?");

/***/ }),

/***/ "./src/js/newEvent.js":
/*!****************************!*\
  !*** ./src/js/newEvent.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./selection */ \"./src/js/selection.js\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui */ \"./src/js/ui.js\");\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  init: function init() {\n    // Hover new event type option\n    $(document).on('mouseenter', '.new-event ul li', function (e) {\n      var $el = $(e.currentTarget);\n      $('.new-event ul li.selected').removeClass('selected');\n      $el.addClass('selected');\n    }); // Click on new event type option\n\n    $(document).on('click', '.new-event ul li', function (e) {\n      var type = parseInt($(e.currentTarget).attr('data-type'));\n      _selection__WEBPACK_IMPORTED_MODULE_1__[\"default\"].changeType(type);\n    });\n    $(document).on('mousedown', '.new-event ul li', function () {\n      return false;\n    }); // Up/down arrow keys + enter key in new event type options\n\n    $(document).on('keydown', function (e) {\n      if (!_selection__WEBPACK_IMPORTED_MODULE_1__[\"default\"].event) return;\n      var $li = $('.new-event ul li.selected');\n\n      if (e.which === 38) {\n        // Up\n        if ($li.length) {\n          if ($li.prev('li').length) $li.prev('li').addClass('selected');else $('.new-event ul li:last-child').addClass('selected');\n          $li.removeClass('selected');\n        } else {\n          $('.new-event ul li:last-child').addClass('selected');\n        }\n      } else if (e.which === 40) {\n        // Down\n        if ($li.length) {\n          if ($li.next('li').length) $li.next('li').addClass('selected');else $('.new-event ul li:first-child').addClass('selected');\n          $li.removeClass('selected');\n        } else {\n          $('.new-event ul li:first-child').addClass('selected');\n        }\n      } else if (e.which === 13) {\n        // Enter\n        if ($li.length && $('.new-event').hasClass('visible')) {\n          var type = parseInt($li.attr('data-type'));\n          _selection__WEBPACK_IMPORTED_MODULE_1__[\"default\"].changeType(type);\n        } else {\n          _selection__WEBPACK_IMPORTED_MODULE_1__[\"default\"].changeType();\n        }\n      }\n    });\n    $(document).on('wheel', '.calendar-wrap .calendars .calendar', function () {\n      if (_ui__WEBPACK_IMPORTED_MODULE_2__[\"default\"].viewIs('full')) {\n        var top = $('.calendar-wrap .calendars .calendar').scrollTop();\n        $('.new-event').css('margin-top', -top);\n      }\n    });\n  },\n  buildEventsTypesOptions: function buildEventsTypesOptions(events) {\n    return \"<ul>\".concat(events.map(function (e) {\n      return \"<li data-type=\\\"\".concat(e.type, \"\\\"><span class=\\\"event-icon\\\" data-color=\\\"\").concat(e.color, \"\\\"></span>\").concat(e.title, \"</li>\");\n    }).join(''), \"</ul>\");\n  },\n  show: function show($event) {\n    var $wrap = $('.calendar-wrap .calendars');\n    $('.new-event').css({\n      top: $event.offset().top - $wrap.offset().top + $event.outerHeight() + 8,\n      left: $event.offset().left - $wrap.offset().left,\n      marginTop: $wrap.scrollTop(),\n      marginLeft: $wrap.scrollLeft()\n    }).html(this.buildEventsTypesOptions(_events__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all)).addClass('visible');\n  },\n  update: function update(eventsList) {\n    $('.new-event').html(this.buildEventsTypesOptions(eventsList)).addClass('visible');\n  },\n  hide: function hide() {\n    $('.new-event').removeClass('visible');\n  }\n});\n\n//# sourceURL=webpack:///./src/js/newEvent.js?");

/***/ }),

/***/ "./src/js/panel.js":
/*!*************************!*\
  !*** ./src/js/panel.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _dates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dates */ \"./src/js/dates.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./selection */ \"./src/js/selection.js\");\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  isOpen: false,\n  layouts: {\n    \"default\": \"<ul>\\n            <li data-tool=\\\"add\\\" class=\\\"selected\\\"><i class=\\\"fas fa-plus\\\"></i><span>Add event\\u2026</span></li>\\n            <li data-tool=\\\"replace\\\"><i class=\\\"fas fa-exchange-alt\\\"></i>Replace event\\u2026</li>\\n            <li data-tool=\\\"remove\\\"><i class=\\\"far fa-trash-alt\\\"></i>Remove event\\u2026</li>\\n            <li data-tool=\\\"fill\\\" class=\\\"border-top\\\" disabled><i class=\\\"far fa-calendar-plus\\\"></i>Fill empty days\\u2026</li>\\n            <li data-tool=\\\"count\\\" disabled><i class=\\\"fa fa-calculator\\\"></i>Count occurences\\u2026</li>\\n        </ul>\",\n    add: \"<div>\\n            <div class=\\\"head\\\">\\n                <i class=\\\"fas fa-plus\\\"></i><span>Add event\\u2026</span>\\n            </div>\\n            <ul></ul>\\n        </div>\",\n    replace: \"<div class=\\\"row\\\">\\n            <div>\\n                <div class=\\\"head\\\">\\n                    <i class=\\\"fas fa-exchange-alt\\\"></i>Replace\\u2026\\n                </div>\\n                <ul class=\\\"from\\\"></ul>\\n            </div>\\n            <div>\\n                <div class=\\\"head\\\">With\\u2026</div>\\n                <ul class=\\\"to\\\"></ul>\\n            </div>\\n        </div>\",\n    remove: \"<div>\\n            <div class=\\\"head\\\">\\n                <i class=\\\"far fa-trash-alt\\\"></i>Remove event\\u2026\\n            </div>\\n            <ul></ul>\\n        </div>\",\n    count: \"<div>\\n            <div class=\\\"head\\\">\\n                <i class=\\\"fa fa-calculator\\\"></i>Count occurences of\\u2026\\n            </div>\\n            <ul></ul>\\n        </div>\"\n  },\n  init: function init() {\n    var _this = this;\n\n    $(document).on('keypress', function (e) {\n      if (e.which === 13) {\n        // Enter\n        if (!_selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectedDays.length) return;\n        if (!_this.isOpen) _this.openPanel();else _this.confirm();\n      }\n    });\n    $(document).on('keydown', function (e) {\n      if ([38, 40].includes(e.which)) {\n        // Arrow keys\n        if (!_this.isOpen) return;\n        if (e.which === 38) _this.previous();else if (e.which === 40) _this.next();\n      }\n    });\n    $(document).on('mouseenter', '.panel ul li:not([disabled])', function (e) {\n      var $el = $(e.target).closest('li');\n      $('.panel ul li.selected').removeClass('selected');\n      $el.addClass('selected');\n    });\n    $(document).on('click', '.panel ul li', function (e) {\n      var $el = $(e.currentTarget);\n      if ($el.is('[disabled]')) return false;\n      $el.siblings('.picked').removeClass('picked');\n\n      _this.confirm();\n\n      return false;\n    });\n    $(document).on('click', '', function () {\n      _this.closePanel();\n    });\n  },\n  openPanel: function openPanel() {\n    this.isOpen = true;\n    $('.panel').html(this.layouts['default']);\n    $('.panel [data-tool=\"add\"] span').text(\"Add \".concat(_selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectedDays.length, \" event\").concat(_selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectedDays.length > 1 ? 's' : '', \"\\u2026\")); // Disable replace and remove if selection is empty\n\n    if (_selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].allDaysEmpty()) $('.panel li[data-tool=\"replace\"], .panel li[data-tool=\"remove\"]').attr('disabled', true);\n    $('.panel-wrap').addClass('visible');\n  },\n  closePanel: function closePanel() {\n    this.isOpen = false;\n    $('.panel-wrap').removeClass('visible');\n  },\n  previous: function previous() {\n    var $el = $('.panel ul li.selected');\n    $el.removeClass('selected');\n    if ($el.prev('li:not([disabled])').length) $el.prev('li:not([disabled])').addClass('selected');else $el.parent('ul').find('li:not([disabled])').last().addClass('selected');\n  },\n  next: function next() {\n    var $el = $('.panel ul li.selected');\n    $el.removeClass('selected');\n    if ($el.next('li:not([disabled])').length) $el.next('li:not([disabled])').addClass('selected');else $el.parent('ul').find('li:not([disabled])').first().addClass('selected');\n  },\n  confirm: function confirm() {\n    var tool = $('.panel ul li.selected').attr('data-tool');\n    var $html;\n    if (tool === 'add') this.addEvent();else if (tool === 'add-event') this.addEvent(true);else if (tool === 'replace') this.replaceEvent();else if (tool === 'from-event') this.replaceEvent(true);else if (tool === 'to-event') this.replaceEvent(true, true);else if (tool === 'remove') this.removeEvent();else if (tool === 'remove-event') this.removeEvent(true);\n    $('.panel').html($html);\n  },\n  buildEventsList: function buildEventsList(action) {\n    var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var $calendars = _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editAll ? $('.calendars-wrap .calendar') : $('.calendars-wrap .calendar.selected');\n    var list = $('.events-wrap ul li').map(function (_, el) {\n      var $el = $(el);\n      var type = $el.attr('data-type');\n      var count = _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectedDays.reduce(function (acc, curr) {\n        var date = _dates__WEBPACK_IMPORTED_MODULE_1__[\"default\"].toString(curr);\n        var $events = $calendars.find(\".day[data-date=\\\"\".concat(date, \"\\\"] .event[data-type=\\\"\").concat(type, \"\\\"]\"));\n        var ids = $events.toArray().map(function (e) {\n          return $(e).attr('data-id');\n        });\n        ids.map(function (id) {\n          return acc.add(id);\n        });\n        return acc;\n      }, new Set()).size;\n      return \"<li data-tool=\\\"\".concat(action, \"-event\\\"><span class=\\\"event\\\" data-type=\\\"\").concat(type, \"\\\" data-color=\\\"\").concat($el.attr('data-color'), \"\\\"><span class=\\\"title\\\">\").concat($el.find('.title').text(), \"</span></span>\").concat(action === 'from' ? \"<span class=\\\"count\\\">\".concat(count, \"</span>\") : '', \"</li>\");\n    }).toArray();\n\n    if (filter) {\n      var eventsInSelection = _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectedDays.map(function (day) {\n        return $(\".day[data-date=\\\"\".concat(_dates__WEBPACK_IMPORTED_MODULE_1__[\"default\"].toString(day), \"\\\"] .event\")).map(function (_, el) {\n          return $(el).attr('data-type');\n        }).toArray();\n      }).flat();\n      list = list.filter(function (li) {\n        return eventsInSelection.includes($(li).find('.event').attr('data-type'));\n      });\n    }\n\n    return list;\n  },\n  addEvent: function addEvent() {\n    var eventSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (!eventSelected) {\n      var $html = $(this.layouts['add']);\n      $html.find('ul').html(this.buildEventsList('add'));\n      $html.find('li:first-child').addClass('selected');\n      $('.panel').html($html);\n      $('.panel .head span').text(\"Add \".concat(_selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectedDays.length, \" event\").concat(_selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectedDays.length > 1 ? 's' : '', \"\\u2026\"));\n    } else {\n      var $event = $('.panel li.selected .event');\n      var type = parseInt($event.attr('data-type'));\n      _events__WEBPACK_IMPORTED_MODULE_2__[\"default\"].insertEvent(type);\n      this.closePanel();\n    }\n  },\n  replaceEvent: function replaceEvent(from, to) {\n    if (!from) {\n      // Initiate replacement window\n      var $html = $(this.layouts['replace']); // Fill \"from\" list with options\n\n      $html.find('ul.from').html(this.buildEventsList('from', true));\n      $html.find('ul.from li:first-child').addClass('selected');\n      $('.panel').html($html);\n    } else if (!to) {\n      // Fill \"to\" list with options\n      $('.panel ul.to').html(this.buildEventsList('to')); // Unselect selected \"from\" option but save it as picked\n\n      $('.panel ul.from li.selected').addClass('picked').removeClass('selected'); // Don't show picked \"from\" option in \"to\" options list (don't replace an event with itself)\n\n      $(\".panel ul.to li .event[data-type=\\\"\".concat($('.panel ul.from li.picked .event').attr('data-type'), \"\\\"]\")).parent('li').remove(); // Select first \"to\" option\n\n      $('.panel ul.to li:first-child').addClass('selected');\n    } else {\n      // Replace events\n      var _from = parseInt($('.panel ul.from li.picked .event').attr('data-type'));\n\n      var _to = parseInt($('.panel ul.to li.selected .event').attr('data-type'));\n\n      _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].replaceEvents(_from, _to);\n      this.closePanel();\n    }\n  },\n  removeEvent: function removeEvent() {\n    var eventSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (!eventSelected) {\n      var $html = $(this.layouts['remove']);\n      $html.find('ul').html(this.buildEventsList('remove', true));\n      $html.find('li:first-child').addClass('selected');\n      $('.panel').html($html);\n    } else {\n      // Remove events\n      var type = parseInt($('.panel ul li.selected .event').attr('data-type'));\n      _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].removeEvents(type);\n      this.closePanel();\n    }\n  }\n});\n\n//# sourceURL=webpack:///./src/js/panel.js?");

/***/ }),

/***/ "./src/js/selection.js":
/*!*****************************!*\
  !*** ./src/js/selection.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _dates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dates */ \"./src/js/dates.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./history */ \"./src/js/history.js\");\n/* harmony import */ var _newEvent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./newEvent */ \"./src/js/newEvent.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./stats */ \"./src/js/stats.js\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ui */ \"./src/js/ui.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  selectedDays: [],\n  clipboard: [],\n  lastHoveredDate: null,\n  drawing: false,\n  resizing: false,\n  event: null,\n  eventID: null,\n  eventTitle: null,\n  maxHeight: 0,\n  init: function init() {\n    var _this = this;\n\n    // Click on a day in main calendar\n    $(document).on('mousedown', '.calendar-wrap .day', function (e) {\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) {\n        if (_this.event) _this.changeType();\n\n        _this.startDraw(e);\n      } else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].tool === 'select') _this.select(e);\n    }); // Double-click on a day in main calendar\n\n    $(document).on('dblclick', '.calendar-wrap .day', function (e) {\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) {\n        _this.startDraw(e);\n\n        _this.draw(e);\n\n        _this.endDraw();\n      }\n    }); // Release click on a day in main calendar\n\n    $(document).on('mouseup', '.calendar-wrap .day', function () {\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) {\n        if (_this.drawing) _this.endDraw();else if (_this.dragging) _this.endDrag();else if (_this.resizing) _this.endResize();\n      }\n    }); // Mouse enters a day in main calendar\n\n    $(document).on('mouseenter', '.calendar-wrap .day', function (e) {\n      var date = $(e.currentTarget).attr('data-date');\n      if (_this.lastHoveredDate === date) return;\n      _this.lastHoveredDate = date;\n\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) {\n        if (_this.drawing) _this.draw(e);else if (_this.dragging) _this.dragEvent(e);else if (_this.resizing) _this.resizeEvent(e);\n      } else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].tool === 'select') {\n        if (_this.selectedDays.length) _this.dragSelect(e);\n      }\n    }); // Change new event title\n\n    $(document).on('input', '.event.new .title', function (e) {\n      var $el = $(e.currentTarget);\n\n      _this.renameEvent($el);\n    }); // Click on an event in main calendar\n\n    $(document).on('mousedown', '.calendar-wrap .day .event:not(.new)', function (e) {\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) return false;\n    }); // Release click on an event in main calendar\n\n    $(document).on('mouseup', '.calendar-wrap .day .event', function () {\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw') && !_this.event) return false;\n    }); // Double-click on an event in main calendar\n\n    $(document).on('dblclick', '.calendar-wrap .day .event', function (e) {\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) {\n        var $el = $(e.currentTarget);\n        _this.eventID = parseInt($el.attr('data-id')); // Abort if we're selecting multiple elements\n\n        var count = new Set($('.event.selected').toArray().map(function (d) {\n          return $(d).attr('data-id');\n        })).size;\n        if (count > 1 || !$el.hasClass('selected')) return false;\n        var $event = $(\".calendar-wrap .event.start[data-id=\\\"\".concat($el.attr('data-id'), \"\\\"]\"));\n        _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].show($event);\n        return false;\n      }\n    }); // Mousedown outside calendar submits new event\n\n    $(document).on('mousedown', '.calendar-wrap .event', function (e) {\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) {\n        var $event = $(e.currentTarget);\n        if (_this.event) _this.changeType();else {\n          _this.dragging = true;\n\n          var _id = parseInt($event.attr('data-id'));\n\n          _this.event = {\n            id: _id,\n            calendar: parseInt($event.closest('.calendar').attr('data-id')),\n            type: parseInt($event.attr('data-type')),\n            start: $(\".event.start[data-id=\\\"\".concat(_id, \"\\\"]\")).closest('.day').attr('data-date'),\n            end: $(\".event.end[data-id=\\\"\".concat(_id, \"\\\"]\")).closest('.day').attr('data-date'),\n            dragging: $event.closest('.day').attr('data-date')\n          };\n        }\n        var multiSelect = e.metaKey || e.ctrlKey || e.shiftKey;\n        if (!multiSelect) $('.event.selected').removeClass('selected');\n        _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hide();\n        var id = $event.attr('data-id');\n        if (!isNaN(id)) _this.selectEventByID(id, true);\n        return false;\n      }\n    }); // Mousedown anywhere\n\n    $(document).on('mousedown', function (e) {\n      _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hide();\n      var multiSelect = e.metaKey || e.ctrlKey || e.shiftKey;\n      if (multiSelect) return false;\n      $('.event.selected').removeClass('selected');\n    });\n    $(document).on('mousedown', '.calendar-wrap .event .anchor', function (e) {\n      _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hide();\n      _this.resizing = true;\n      var $anchor = $(e.currentTarget);\n      var $event = $anchor.closest('.event');\n      var id = parseInt($event.attr('data-id'));\n      _this.event = {\n        id: id,\n        calendar: parseInt($event.closest('.calendar').attr('data-id')),\n        type: parseInt($event.attr('data-type')),\n        start: $(\".event.start[data-id=\\\"\".concat(id, \"\\\"]\")).closest('.day').attr('data-date'),\n        end: $(\".event.end[data-id=\\\"\".concat(id, \"\\\"]\")).closest('.day').attr('data-date'),\n        anchor: $anchor.hasClass('anchor-start') ? 'start' : 'end'\n      };\n      $event.closest('.calendar').addClass('resizing');\n      return false;\n    });\n    $(document).on('mouseup', function () {\n      if (_this.dragging) _this.endDrag();else if (_this.resizing) _this.endResize();\n    });\n    $(document).on('dblclick', '.calendar-wrap .event .anchor', function () {\n      return false;\n    });\n    this.maxHeight = _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCalendarHeight();\n  },\n  startDraw: function startDraw(e) {\n    this.drawing = true;\n    var $day = $(e.currentTarget);\n    var date = $day.attr('data-date');\n    this.event = {\n      id: ++_events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].eventID,\n      calendar: parseInt($day.parents('.calendar').attr('data-id')),\n      start: date,\n      end: date,\n      startingDate: date\n    };\n    this.eventID = this.event.id;\n  },\n  draw: function draw(e) {\n    var $day = $(e.currentTarget);\n    var date = $day.attr('data-date');\n\n    if (date >= this.event.startingDate) {\n      this.event.start = this.event.startingDate;\n      this.event.end = date;\n    } else if (date < this.event.startingDate) {\n      this.event.start = date;\n      this.event.end = this.event.startingDate;\n    }\n\n    _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateEvent(this.event, false);\n    this.maxHeight = Math.max(this.maxHeight, _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCalendarHeight());\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight(this.maxHeight);\n  },\n  endDraw: function endDraw() {\n    if (!this.event) return;\n    this.drawing = false; // Find new event start\n\n    var $event = $(\".calendar-wrap .event.new.start[data-id=\\\"\".concat(this.event.id, \"\\\"]\")); // Ignore single click\n\n    if (!$event.length) {\n      this.event = null;\n      _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].eventID--;\n      return;\n    }\n\n    var $title = $event.find('.title');\n    $title.attr('contenteditable', true).focus();\n    if (_events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].all.length) _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].show($event);\n  },\n  cancelDraw: function cancelDraw() {\n    this.event = null;\n    _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].eventID--;\n    _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].removeEvent({\n      id: this.eventID\n    });\n    _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hide();\n  },\n  renameEvent: function renameEvent($el) {\n    var title = $el.text();\n    this.eventTitle = title;\n    this.filterTypes(title); // Duplicate text to other title fields (event on multiple weeks)\n\n    var id = $el.closest('.event').attr('data-id');\n    $(\".event[data-id=\\\"\".concat(id, \"\\\"] .title:not(:focus)\")).text(title);\n  },\n  changeType: function changeType(type) {\n    var _this2 = this;\n\n    var event;\n    var calendar;\n\n    if (!isNaN(this.eventID)) {\n      calendar = _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all.find(function (c) {\n        return c.events.some(function (e) {\n          return e.id === _this2.eventID;\n        });\n      });\n      event = calendar.events.find(function (e) {\n        return e.id === _this2.eventID;\n      });\n    } else {\n      var $event = $('.calendar-wrap .event.start.selected').eq(0);\n      var eventID = parseInt($event.attr('data-id'));\n      calendar = _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all.find(function (c) {\n        return c.events.some(function (e) {\n          return e.id === eventID;\n        });\n      });\n      event = calendar.events.find(function (e) {\n        return e.id === eventID;\n      });\n    }\n\n    if (isNaN(type)) {\n      // New event\n      _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].newEvent({\n        title: this.eventTitle || 'New event',\n        color: 17\n      });\n      event.type = _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].type;\n    } else {\n      event.type = type;\n    }\n\n    event.calendar = calendar.id;\n    _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateEvent(event);\n    _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hide();\n    this.event = null;\n    this.eventID = null;\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  filterTypes: function filterTypes(title) {\n    var eventsList = _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].all;\n    eventsList = eventsList.filter(function (e) {\n      return e.title.toLowerCase().startsWith(title.toLowerCase());\n    });\n    if (eventsList.length) _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].update(eventsList);else _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hide();\n  },\n  select: function select(e) {\n    var $day = $(e.currentTarget);\n    var date = $day.attr('data-date');\n    $('.calendar.selected').removeClass('selected');\n    $(\".calendar[data-id=\\\"\".concat($day.closest('.calendar').attr('data-id'), \"\\\"]\")).addClass('selected');\n\n    if (e.metaKey && !e.shiftKey && !e.altKey) {\n      $('.selected-first').removeClass('selected-first');\n      $day.addClass('selected-first');\n\n      if (_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isInArray(this.selectedDays, new Date(date))) {\n        this.selectedDays = this.selectedDays.filter(function (d) {\n          return d.getTime() !== new Date(date).getTime();\n        });\n      } else {\n        this.selectedDays.push(new Date(date));\n      }\n    } else if (e.shiftKey) {\n      var _this$selectedDays;\n\n      var $selectedFirst = $('.calendar-wrap .day.selected-first').length ? $('.calendar-wrap .day.selected-first') : $('.calendar-wrap .day.selected').eq(0);\n      $selectedFirst.addClass('selected-first');\n      var days = [];\n\n      var _sort = [new Date($selectedFirst.attr('data-date')), new Date($day.attr('data-date'))].sort(function (a, b) {\n        return a > b ? 1 : -1;\n      }),\n          _sort2 = _slicedToArray(_sort, 2),\n          start = _sort2[0],\n          end = _sort2[1];\n\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) {\n        var _selectedDays = [new Date($selectedFirst.attr('data-date')), new Date(date)];\n        var lowestWeekDay = Math.min.apply(Math, _toConsumableArray(_selectedDays.map(function (d) {\n          return d.getDay();\n        }).map(function (w) {\n          return w === 0 ? 7 : w;\n        })));\n        var highestWeekDay = Math.max.apply(Math, _toConsumableArray(_selectedDays.map(function (d) {\n          return d.getDay();\n        }).map(function (w) {\n          return w === 0 ? 7 : w;\n        })));\n        start.setDate(start.getDate() - ((start.getDay() === 0 ? 7 : start.getDay()) - lowestWeekDay));\n        end.setDate(end.getDate() + (highestWeekDay - (end.getDay() === 0 ? 7 : end.getDay())));\n        days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end); // Filter out days out of rectangle\n\n        days = days.filter(function (d) {\n          return (d.getDay() === 0 ? 7 : d.getDay()) >= lowestWeekDay && (d.getDay() === 0 ? 7 : d.getDay()) <= highestWeekDay;\n        });\n      } else {\n        days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end);\n      }\n\n      if (e.metaKey) (_this$selectedDays = this.selectedDays).push.apply(_this$selectedDays, _toConsumableArray(days));else this.selectedDays = days;\n    } else if (e.altKey) {\n      var _this$selectedDays2;\n\n      var _$selectedFirst = $('.calendar-wrap .day.selected-first').length ? $('.calendar-wrap .day.selected-first') : $('.calendar-wrap .day.selected').eq(0);\n\n      _$selectedFirst.addClass('selected-first');\n\n      var _sort3 = [new Date(_$selectedFirst.attr('data-date')), new Date($day.attr('data-date'))].sort(function (a, b) {\n        return a > b ? 1 : -1;\n      }),\n          _sort4 = _slicedToArray(_sort3, 2),\n          _start = _sort4[0],\n          _end = _sort4[1];\n\n      var _days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(_start, _end);\n\n      if (e.metaKey) (_this$selectedDays2 = this.selectedDays).push.apply(_this$selectedDays2, _toConsumableArray(_days));else this.selectedDays = _days;\n    } else {\n      // if (this.selectedDays.length && this.selectedDays[0].getTime() === new Date(date).getTime()) {\n      //     this.selectedDays = []; \n      // } else {\n      this.selectedDays = [new Date(date)];\n      $('.calendar-wrap .day.selected-first').removeClass('selected-first');\n      $('.calendar-wrap .day.selected-last').removeClass('selected-last');\n      $day.addClass('selected-first selected-last'); // }\n    }\n\n    this.highlightSelection();\n  },\n  dragSelect: function dragSelect(e) {\n    if (!(e.which === 1 || e.which === 18)) return;\n    var date;\n    if (e.which === 18) date = this.lastHoveredDate;else if (e.which === 1) date = $(e.currentTarget).attr('data-date');\n    var $selectedFirst = $('.calendar-wrap .day.selected-first').length ? $('.calendar-wrap .day.selected-first') : $('.calendar-wrap .day.selected').eq(0);\n    $selectedFirst.addClass('selected-first');\n    var days = [];\n\n    if (e.metaKey) {\n      this.selectedDays.push(new Date(date));\n    } else {\n      var _sort5 = [new Date($selectedFirst.attr('data-date')), new Date(date)].sort(function (a, b) {\n        return a > b ? 1 : -1;\n      }),\n          _sort6 = _slicedToArray(_sort5, 2),\n          start = _sort6[0],\n          end = _sort6[1];\n\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) {\n        var _selectedDays = [new Date($selectedFirst.attr('data-date')), new Date(date)];\n        var lowestWeekDay = Math.min.apply(Math, _toConsumableArray(_selectedDays.map(function (d) {\n          return d.getDay();\n        }).map(function (w) {\n          return w === 0 ? 7 : w;\n        })));\n        var highestWeekDay = Math.max.apply(Math, _toConsumableArray(_selectedDays.map(function (d) {\n          return d.getDay();\n        }).map(function (w) {\n          return w === 0 ? 7 : w;\n        })));\n\n        if (!e.altKey) {\n          // Rectangle mode, move start date to top left corner and end date to bottom right corner\n          start.setDate(start.getDate() - ((start.getDay() === 0 ? 7 : start.getDay()) - lowestWeekDay));\n          end.setDate(end.getDate() + (highestWeekDay - (end.getDay() === 0 ? 7 : end.getDay())));\n        }\n\n        days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end); // Filter out days out of rectangle\n\n        if (!e.altKey) days = days.filter(function (d) {\n          return (d.getDay() === 0 ? 7 : d.getDay()) >= lowestWeekDay && (d.getDay() === 0 ? 7 : d.getDay()) <= highestWeekDay;\n        });\n      } else {\n        days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end);\n      }\n    }\n\n    if (!$selectedFirst.hasClass('selected')) {\n      this.selectedDays = this.selectedDays.filter(function (d) {\n        return d.getTime() !== new Date(date).getTime();\n      });\n    } else {\n      var _this$selectedDays3;\n\n      if (e.metaKey) (_this$selectedDays3 = this.selectedDays).push.apply(_this$selectedDays3, _toConsumableArray(days));else this.selectedDays = days;\n    }\n\n    this.highlightSelection();\n  },\n  moveSelection: function moveSelection(e) {\n    // Ignore if no selection\n    var $selected = $('.calendar-wrap .day.selected-last');\n    if (!$selected.length) return; // Target set to same date by default (for linear mode)\n\n    var date = new Date($selected.attr('data-date'));\n    var target = date;\n\n    if (e.which === 37) {\n      if (e.metaKey) {\n        // Meta + left\n        // Full: beginning of week\n        if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) target = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeFirstWeekDay(date); // Linear: one week before\n        else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) target = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(date, -7);\n      } else {\n        // Left\n        // One day before\n        target = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(date, -1); // Prevent changing week with shift key\n\n        if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full') && target.getDay() === 0 && e.shiftKey) return;\n      }\n    } else if (e.which === 38) {\n      // Up\n      // Full: one week before\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) target = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(date, -7); // Linear: calendar above\n      else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectPreviousCalendar();\n    } else if (e.which === 39) {\n      if (e.metaKey) {\n        // Meta + right\n        // Full: end of week\n        if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) target = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeLastWeekDay(date); // Linear: one week after\n        else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) target = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(date, 7);\n      } else {\n        // Right\n        // One day after\n        target = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(date, 1); // Prevent changing week with shift key\n\n        if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full') && target.getDay() === 1 && e.shiftKey) return;\n      }\n    } else if (e.which === 40) {\n      // Down\n      // Full: one week after\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) target = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(date, 7); // Linear: move to calendar under\n      else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectNextCalendar();\n    } // TODO: check that _all_ days in selection fit in calendar?\n\n\n    if (!_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isInArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].shownStart, _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].shownEnd), new Date(new Date(target).setHours(0)))) return;\n\n    if (e.shiftKey) {\n      var $selectedFirst = $('.selected-first');\n      $('.selected-last').removeClass('selected-last');\n      var targetDate = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(target);\n      var $target = $(\".calendar-wrap .day[data-date=\\\"\".concat(targetDate, \"\\\"]\"));\n      $target.addClass('selected-last');\n      this.selectedDays = [new Date($selectedFirst.attr('data-date')), new Date(targetDate)];\n\n      var _sort7 = [new Date($selectedFirst.attr('data-date')), new Date(target)].sort(function (a, b) {\n        return a > b ? 1 : -1;\n      }),\n          _sort8 = _slicedToArray(_sort7, 2),\n          start = _sort8[0],\n          end = _sort8[1];\n\n      var days = [];\n\n      if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) {\n        var lowestWeekDay = Math.min.apply(Math, _toConsumableArray(this.selectedDays.map(function (d) {\n          return d.getDay();\n        }).map(function (w) {\n          return w === 0 ? 7 : w;\n        })));\n        var highestWeekDay = Math.max.apply(Math, _toConsumableArray(this.selectedDays.map(function (d) {\n          return d.getDay();\n        }).map(function (w) {\n          return w === 0 ? 7 : w;\n        })));\n        start.setDate(start.getDate() - ((start.getDay() === 0 ? 7 : start.getDay()) - lowestWeekDay));\n        end.setDate(end.getDate() + (highestWeekDay - (end.getDay() === 0 ? 7 : end.getDay())));\n        days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end); // Filter out days out of rectangle\n\n        days = days.filter(function (d) {\n          return (d.getDay() === 0 ? 7 : d.getDay()) >= lowestWeekDay && (d.getDay() === 0 ? 7 : d.getDay()) <= highestWeekDay;\n        });\n      } else {\n        days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end);\n      }\n\n      this.selectedDays = days;\n    } else if (e.altKey) {\n      var _$selectedFirst2 = $('.selected-first');\n\n      $('.selected-last').removeClass('selected-last');\n\n      var _targetDate = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(target);\n\n      var _$target = $(\".calendar-wrap .day[data-date=\\\"\".concat(_targetDate, \"\\\"]\"));\n\n      _$target.addClass('selected-last');\n\n      var _sort9 = [new Date(_$selectedFirst2.attr('data-date')), new Date(target)].sort(function (a, b) {\n        return a > b ? 1 : -1;\n      }),\n          _sort10 = _slicedToArray(_sort9, 2),\n          _start2 = _sort10[0],\n          _end2 = _sort10[1];\n\n      var _days2 = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(_start2, _end2);\n\n      this.selectedDays = _days2;\n    } else {\n      var diff = target - date; // Move .selected-first and .selected-last classes\n\n      var $sF = $('.selected-first');\n      var dateSF = new Date($sF.attr('data-date'));\n      dateSF.setTime(dateSF.getTime() + diff);\n      $sF.removeClass('selected-first');\n      $(\".calendar-wrap .day[data-date=\".concat(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(dateSF), \"]\")).addClass('selected-first');\n      var $sL = $('.selected-last');\n      var dateSL = new Date($sL.attr('data-date'));\n      dateSL.setTime(dateSL.getTime() + diff);\n      $sL.removeClass('selected-last');\n      $(\".calendar-wrap .day[data-date=\".concat(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(dateSL), \"]\")).addClass('selected-last'); // For each already selected day, move by diff between first selected day and target\n\n      this.selectedDays = this.selectedDays.map(function (date) {\n        return new Date(date.getTime() + diff);\n      });\n    }\n\n    this.highlightSelection();\n    this.scrollInView(e.which);\n  },\n  emptySelection: function emptySelection() {\n    // Create action for history\n    var action = {\n      type: 'removeEvents',\n      events: []\n    };\n\n    var removeEvents = function removeEvents($events) {\n      $events.each(function (_, el) {\n        var $el = $(el);\n        var id = parseInt($el.attr('data-id'));\n        var start = $(\".event[data-id=\\\"\".concat(id, \"\\\"].start\")).closest('.day').attr('data-date');\n        var end = $(\".event[data-id=\\\"\".concat(id, \"\\\"].end\")).closest('.day').attr('data-date');\n        if (!start || !end) return;\n        var event = {\n          id: id,\n          calendar: parseInt($el.parents('.calendar').attr('data-id')),\n          type: parseInt($el.attr('data-type')),\n          start: start,\n          end: end\n        };\n        _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].removeEvent(event); // Save events in action\n\n        action.events.push(event);\n      });\n    };\n\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) {\n      var $events = $('.event.selected');\n      removeEvents($events);\n    } else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].tool === 'select') {\n      var _iterator = _createForOfIteratorHelper(this.selectedDays),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var day = _step.value;\n          var date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day);\n\n          var _$events = void 0;\n\n          if (_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editAll) {\n            _$events = $(\".calendars-wrap .day[data-date=\\\"\".concat(date, \"\\\"] .event\"));\n          } else {\n            _$events = $(\".calendars-wrap .calendar.selected .day[data-date=\\\"\".concat(date, \"\\\"] .event\"));\n          }\n\n          if (!_$events.length) continue;\n          removeEvents(_$events);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    } // Save action in history\n\n\n    _history__WEBPACK_IMPORTED_MODULE_4__[\"default\"].pushAction(action);\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight();\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  selectAll: function selectAll() {\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('select')) {\n      var start = new Date($('#start').val());\n      var end = new Date($('#end').val());\n      this.selectedDays = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end);\n      this.highlightSelection();\n    } else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].toolIs('draw')) {\n      $('.calendar.selected .event').addClass('selected');\n    }\n  },\n  selectByWeekdays: function selectByWeekdays(days) {\n    var _this3 = this;\n\n    var add = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var start = new Date($('#start').val());\n    var end = new Date($('#end').val());\n    if (!add) this.selectedDays = [];\n\n    var _iterator2 = _createForOfIteratorHelper(days),\n        _step2;\n\n    try {\n      var _loop = function _loop() {\n        var _this3$selectedDays;\n\n        var day = _step2.value;\n\n        (_this3$selectedDays = _this3.selectedDays).push.apply(_this3$selectedDays, _toConsumableArray(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end).filter(function (d) {\n          return d.getDay() === parseInt(day);\n        })));\n\n        var $day = $(\".head.full [data-day=\".concat(day, \"]\"));\n        $day.addClass('selected');\n\n        if (remove) {\n          _this3.selectedDays = _this3.selectedDays.filter(function (d) {\n            return d.getDay() !== parseInt(day);\n          });\n          $day.removeClass('selected');\n        }\n      };\n\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        _loop();\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    this.highlightSelection();\n  },\n  narrowSelection: function narrowSelection() {\n    var $onlySelectedDay = $('.selected-first.selected-last.selected'); // Keep only first selected day in selection\n\n    var $selectedFirst = $('.selected-first');\n    var date = new Date($selectedFirst.attr('data-date'));\n    $('.selected-last').removeClass('selected-last');\n    $selectedFirst.addClass('selected-last');\n    this.selectedDays = [date];\n    this.highlightSelection(); // If only one selected day, toggle it\n\n    $onlySelectedDay.removeClass('selected');\n    _newEvent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hide();\n  },\n  copySelection: function copySelection() {\n    var _this4 = this;\n\n    this.clipboard = []; // Find selection's bounding rectangle\n\n    var start = new Date(Math.min.apply(Math, _toConsumableArray(this.selectedDays)));\n    var end = new Date(Math.max.apply(Math, _toConsumableArray(this.selectedDays)));\n    var lowestWeekDay = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findLowestWeekDay(this.selectedDays);\n    var highestWeekDay = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findHighestWeekDay(this.selectedDays);\n    start.setDate(start.getDate() - ((start.getDay() === 0 ? 7 : start.getDay()) - lowestWeekDay));\n    end.setDate(end.getDate() + (highestWeekDay - (end.getDay() === 0 ? 7 : end.getDay()))); // Create range from start to end of bounding rectangle\n\n    var days = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(start, end); // Filter out days out of bounding rectangle\n\n    days = days.filter(function (d) {\n      return (d.getDay() === 0 ? 7 : d.getDay()) >= lowestWeekDay && (d.getDay() === 0 ? 7 : d.getDay()) <= highestWeekDay;\n    }); // Create array of events for selected days, keep null for an empty day\n\n    var events = [];\n\n    var _iterator3 = _createForOfIteratorHelper(days),\n        _step3;\n\n    try {\n      var _loop2 = function _loop2() {\n        var day = _step3.value;\n        var eventsThatDay = []; // Ignore unselected days\n\n        if (!_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isInArray(_this4.selectedDays, day)) {\n          events.push(null);\n          return \"continue\";\n        }\n\n        ;\n        var date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day);\n        var $events = $(\".calendar-wrap .day[data-date=\\\"\".concat(date, \"\\\"] .event\")); // Copy day events to clipboard\n\n        if ($events.length) {\n          $events.each(function (_, el) {\n            var $el = $(el);\n            var event = {\n              type: parseInt($el.attr('data-type')),\n              calendar: parseInt($el.closest('.calendar').attr('data-id')),\n              id: parseInt($el.attr('data-id'))\n            };\n\n            if (events.flat().some(function (e) {\n              return (e === null || e === void 0 ? void 0 : e.id) === event.id;\n            })) {\n              var _e = events.flat().find(function (e) {\n                return (e === null || e === void 0 ? void 0 : e.id) === event.id;\n              });\n\n              _e.duration = _e.duration ? _e.duration + 1 : 2;\n            } else {\n              eventsThatDay.push(event);\n            }\n          });\n          events.push(eventsThatDay);\n        } else {\n          events.push(null);\n        }\n      };\n\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _ret = _loop2();\n\n        if (_ret === \"continue\") continue;\n      } // Convert 1D array of events to 2D array to mimic selection bounding rectangle layout\n\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n\n    while (events.length) {\n      this.clipboard.push(events.splice(0, highestWeekDay - lowestWeekDay + 1));\n    }\n\n    if (this.clipboard.length) $('nav [data-tool=\"paste\"').removeClass('disabled');else $('nav [data-tool=\"paste\"').addClass('disabled');\n  },\n  cutSelection: function cutSelection() {\n    this.copySelection();\n    this.emptySelection();\n  },\n  pasteSelection: function pasteSelection() {\n    // Push action in history\n    var action = {\n      type: 'addEvents',\n      events: []\n    }; // Clipboard paste starts at selected day\n\n    var $selected = $('.calendar-wrap .day.selected-first');\n    var date = new Date($selected.attr('data-date'));\n\n    for (var j = 0; j < this.clipboard.length; j += 1) {\n      for (var i = 0; i < this.clipboard[0].length; i += 1) {\n        // Find event in clipboard if any\n        var eventsThatDay = this.clipboard[j][i];\n        if (!eventsThatDay) continue;\n\n        var _iterator4 = _createForOfIteratorHelper(eventsThatDay),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _event = _step4.value;\n            // Find target day\n            var target = new Date(new Date(date).setDate(date.getDate() + j * 7 + i));\n            var start = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(target);\n            var end = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(start, _event.duration - 1 || 0));\n\n            var _iterator5 = _createForOfIteratorHelper(_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getSelectedCalendars()),\n                _step5;\n\n            try {\n              for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                var calendarID = _step5.value;\n\n                // Create event\n                var event = _objectSpread(_objectSpread({}, _event), {}, {\n                  id: ++_events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].eventID,\n                  calendar: calendarID,\n                  start: start,\n                  end: end\n                }); // Build event\n\n\n                _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].buildEvent(event); // Save event in action\n\n                action.events.push(event);\n              }\n            } catch (err) {\n              _iterator5.e(err);\n            } finally {\n              _iterator5.f();\n            }\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      }\n    } // Save action in history\n\n\n    _history__WEBPACK_IMPORTED_MODULE_4__[\"default\"].pushAction(action);\n    _stats__WEBPACK_IMPORTED_MODULE_6__[\"default\"].update();\n  },\n  highlightSelection: function highlightSelection() {\n    // Reset all currently selected days\n    $('.day.selected').removeClass('selected no-top no-right no-bottom no-left');\n    $('.event.selected').removeClass('selected');\n    var selectedEvents = new Set();\n\n    var _iterator6 = _createForOfIteratorHelper(this.selectedDays),\n        _step6;\n\n    try {\n      for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n        var day = _step6.value;\n        var date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day);\n        var $el = $(\"main:not(.linear) .calendar .day[data-date=\\\"\".concat(date, \"\\\"], main.linear .calendar.selected .day[data-date=\\\"\").concat(date, \"\\\"]\")); // Select day\n\n        $el.addClass('selected'); // Add styles classes (for borders)\n\n        var dayBeforeSelected = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isInArray(this.selectedDays, _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(day, -1));\n        var dayAfterSelected = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isInArray(this.selectedDays, _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(day, 1));\n\n        if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) {\n          var dayWeekBeforeSelected = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isInArray(this.selectedDays, _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(day, -7));\n          var dayWeekAfterSelected = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isInArray(this.selectedDays, _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(day, 7));\n          if (dayBeforeSelected && day.getDay() !== 1) $el.addClass('no-left');\n          if (dayAfterSelected && day.getDay() !== 0) $el.addClass('no-right');\n          if (dayWeekBeforeSelected) $el.addClass('no-top');\n          if (dayWeekAfterSelected) $el.addClass('no-bottom');\n        } else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) {\n          if (dayBeforeSelected) $el.addClass('no-left');\n          if (dayAfterSelected) $el.addClass('no-right');\n        }\n\n        var $events = $(\".calendar-wrap .day[data-date=\\\"\".concat(date, \"\\\"] .event\"));\n        $events.each(function (_, el) {\n          var id = parseInt($(el).attr('data-id'));\n          if (!isNaN(id)) selectedEvents.add(id);\n        });\n      } // for (const eventID of [...selectedEvents]) {\n      //     this.selectEventByID(eventID);\n      // }\n\n    } catch (err) {\n      _iterator6.e(err);\n    } finally {\n      _iterator6.f();\n    }\n\n    if (this.selectedDays.length || $('.event.selected').length) {\n      $('nav [data-tool=\"cut\"]').removeClass('disabled');\n      $('nav [data-tool=\"copy\"]').removeClass('disabled');\n    } else {\n      $('nav [data-tool=\"cut\"]').addClass('disabled');\n      $('nav [data-tool=\"copy\"]').addClass('disabled');\n    }\n  },\n  scrollInView: function scrollInView(key) {\n    var dir = {\n      '37': 'left',\n      '38': 'up',\n      '39': 'right',\n      '40': 'down'\n    }[key];\n    var duration = 150;\n    var height = _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCalendarHeight();\n    var marginV = height * 1.5;\n    var highest = Math.min.apply(Math, _toConsumableArray($('.calendar-wrap .day.selected').toArray().map(function (d) {\n      return $(d).offset().top;\n    })));\n    var lowest = Math.max.apply(Math, _toConsumableArray($('.calendar-wrap .day.selected').toArray().map(function (d) {\n      return $(d).offset().top;\n    }))) + height;\n    var top = $('.calendar-wrap .calendars').offset().top;\n\n    if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('full')) {\n      var bottom = top + $('.calendar-wrap .calendar.selected').outerHeight();\n\n      if (dir === 'up' && highest - top < marginV) {\n        var scrollTop = $('.calendar-wrap .calendar.selected').scrollTop() - (top - highest) - marginV;\n        $('.calendar-wrap .calendar.selected').stop().animate({\n          scrollTop: scrollTop\n        }, duration);\n      }\n\n      if (dir === 'down' && lowest + marginV > bottom) {\n        var _scrollTop = $('.calendar-wrap .calendar.selected').scrollTop() - (bottom - lowest) + marginV;\n\n        $('.calendar-wrap .calendar.selected').stop().animate({\n          scrollTop: _scrollTop\n        }, duration);\n      }\n    } else if (_ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].viewIs('linear')) {\n      var _bottom = top + $('.calendar-wrap .calendars').outerHeight();\n\n      var backToTop = !$('.calendars-wrap .calendar.selected').prevAll('.calendar:not(.hidden)').length;\n      var backToBottom = !$('.calendars-wrap .calendar.selected').nextAll('.calendar:not(.hidden)').length;\n      var width = $('.calendar-wrap .day').outerWidth();\n      var marginH = width * 1.5;\n      var leftest = Math.min.apply(Math, _toConsumableArray($('.calendar-wrap .day.selected').toArray().map(function (d) {\n        return $(d).offset().left;\n      })));\n      var rightest = Math.max.apply(Math, _toConsumableArray($('.calendar-wrap .day.selected').toArray().map(function (d) {\n        return $(d).offset().left;\n      }))) + width;\n      var left = $('.calendar-wrap .calendars').offset().left;\n      var right = left + $('.calendar-wrap').outerWidth();\n      var loop = false;\n      var timeout;\n\n      var moveStickyLabels = function moveStickyLabels(start) {\n        if (start === true) {\n          loop = true;\n          timeout = setTimeout(function () {\n            loop = false;\n          }, duration);\n        }\n\n        _ui__WEBPACK_IMPORTED_MODULE_7__[\"default\"].moveStickyLabels();\n        if (loop) requestAnimationFrame(moveStickyLabels);\n      };\n\n      if ((dir === 'up' || backToTop) && highest - marginV < top) {\n        var _scrollTop2 = $('.calendar-wrap .calendars').scrollTop() - (top - highest) - marginV;\n\n        $('.calendar-wrap .calendars, .calendars-wrap .scroll-wrap').stop().animate({\n          scrollTop: _scrollTop2\n        }, duration);\n      }\n\n      if ((dir === 'down' || backToBottom) && lowest + marginV > _bottom) {\n        var _scrollTop3 = $('.calendar-wrap .calendars').scrollTop() - (_bottom - lowest) + marginV;\n\n        $('.calendar-wrap .calendars, .calendars-wrap .scroll-wrap').stop().animate({\n          scrollTop: _scrollTop3\n        }, duration);\n      }\n\n      if (dir === 'left' && leftest - marginH - $('.calendar-wrap').scrollLeft() < left) {\n        var scrollLeft = leftest - left - marginH;\n        moveStickyLabels(true);\n        $('.calendar-wrap').stop().animate({\n          scrollLeft: scrollLeft\n        }, duration);\n      }\n\n      if (dir === 'right' && rightest + marginH - $('.calendar-wrap').scrollLeft() > right) {\n        var _scrollLeft = rightest - right + marginH;\n\n        moveStickyLabels(true);\n        $('.calendar-wrap').stop().animate({\n          scrollLeft: _scrollLeft\n        }, duration);\n      }\n    }\n  },\n  replaceEvents: function replaceEvents(from, to) {\n    // Create action for history\n    var action = {\n      type: 'replaceEvents',\n      events: []\n    };\n    var options = {\n      calendars: _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getSelectedCalendars(),\n      days: this.selectedDays,\n      type: from\n    };\n    var eventsToReplace = _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findEvents(options);\n\n    var _iterator7 = _createForOfIteratorHelper(eventsToReplace),\n        _step7;\n\n    try {\n      for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n        var event = _step7.value;\n        event.from = event.type;\n        event.type = to; // Replace event\n\n        _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].replaceEvent(event); // Save event in action\n\n        action.events.push(event);\n      } // Save action in history\n\n    } catch (err) {\n      _iterator7.e(err);\n    } finally {\n      _iterator7.f();\n    }\n\n    _history__WEBPACK_IMPORTED_MODULE_4__[\"default\"].pushAction(action);\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  removeEvents: function removeEvents(type) {\n    // Create action for history\n    var action = {\n      type: 'removeEvents',\n      events: []\n    };\n\n    var _iterator8 = _createForOfIteratorHelper(this.selectedDays),\n        _step8;\n\n    try {\n      var _loop3 = function _loop3() {\n        var day = _step8.value;\n        var date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day);\n        var $events = _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editAll ? $(\".day[data-date=\\\"\".concat(date, \"\\\"] .event[data-type=\\\"\").concat(type, \"\\\"]\")) : $(\".calendar.selected .day[data-date=\\\"\".concat(date, \"\\\"] .event[data-type=\\\"\").concat(type, \"\\\"]\"));\n        $events.each(function (_, el) {\n          var $el = $(el);\n          var event = {\n            id: parseInt($el.attr('data-id')),\n            calendar: parseInt($el.closest('.calendar').attr('data-id')),\n            type: parseInt($el.attr('data-type')),\n            start: date,\n            end: date\n          }; // Remove event\n\n          _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].removeEvent(event); // Save event in action\n\n          action.events.push(event);\n        });\n      };\n\n      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n        _loop3();\n      } // Save action in history\n\n    } catch (err) {\n      _iterator8.e(err);\n    } finally {\n      _iterator8.f();\n    }\n\n    _history__WEBPACK_IMPORTED_MODULE_4__[\"default\"].pushAction(action);\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  allDaysEmpty: function allDaysEmpty() {\n    if (_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editAll) {\n      return !this.selectedDays.some(function (day) {\n        return $(\".day[data-date=\\\"\".concat(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day), \"\\\"] .event\")).length;\n      });\n    } else {\n      return !this.selectedDays.some(function (day) {\n        return $(\".calendar.selected .day[data-date=\\\"\".concat(_dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].toString(day), \"\\\"] .event\")).length;\n      });\n    }\n  },\n  selectEventByID: function selectEventByID(id) {\n    var toggle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var $event = $(\".calendar-wrap .event[data-id=\\\"\".concat(id, \"\\\"]\"));\n    if (toggle) $event.toggleClass('selected');else $event.addClass('selected');\n  },\n  dragEvent: function dragEvent(e) {\n    var $day = $(e.currentTarget);\n    var date = $day.attr('data-date');\n    var delta = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].delta(this.event.dragging, date);\n    this.event.start = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(new Date(this.event.start), delta);\n    this.event.end = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(new Date(this.event.end), delta);\n    this.event.dragging = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(new Date(this.event.dragging), delta);\n    _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateEvent(this.event, false);\n    this.maxHeight = Math.max(this.maxHeight, _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCalendarHeight());\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight(this.maxHeight);\n    this.selectEventByID(this.event.id);\n  },\n  endDrag: function endDrag() {\n    this.event = null;\n    this.dragging = false;\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  resizeEvent: function resizeEvent(e) {\n    var $day = $(e.currentTarget);\n    var date = $day.attr('data-date');\n    if (this.event.anchor === 'start' && date <= this.event.end) this.event.start = date;else if (this.event.anchor === 'end' && date >= this.event.start) this.event.end = date;\n    _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateEvent(this.event, false);\n    this.maxHeight = Math.max(this.maxHeight, _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCalendarHeight());\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight(this.maxHeight);\n  },\n  endResize: function endResize() {\n    this.event = null;\n    this.resizing = false;\n    $('.calendar.resizing').removeClass('resizing');\n    this.maxHeight = _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCalendarHeight();\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  }\n});\n\n//# sourceURL=webpack:///./src/js/selection.js?");

/***/ }),

/***/ "./src/js/settings.js":
/*!****************************!*\
  !*** ./src/js/settings.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  // spreadOnDrag: false,\n  oneEventPerDay: false,\n  template: 'filled'\n});\n\n//# sourceURL=webpack:///./src/js/settings.js?");

/***/ }),

/***/ "./src/js/sortable.js":
/*!****************************!*\
  !*** ./src/js/sortable.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stats */ \"./src/js/stats.js\");\n/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tooltip */ \"./src/js/tooltip.js\");\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  $sortedEl: null,\n  sortedPosition: {},\n  sortedOrigin: {},\n  parentScroll: null,\n  init: function init() {\n    var _this = this;\n\n    $(document).on('mousedown', '.sortable i[data-tool=\"sort\"]', function (e) {\n      _this.startSort(e);\n    });\n    $(document).on('mouseup', function (e) {\n      if (_this.$sortedEl) _this.stopSort(e);\n    });\n    $(document).on('mousemove', function (e) {\n      if (_this.$sortedEl) _this.sort(e);\n    });\n    $('.scroll-wrap').on('scroll', function (e) {\n      if (_this.$sortedEl) _this.sort(e);\n    });\n  },\n  startSort: function startSort(e) {\n    _tooltip__WEBPACK_IMPORTED_MODULE_4__[\"default\"].hide();\n    var $icon = $(e.target);\n    this.$sortedEl = $icon.closest('.sortable');\n    this.$sortedEl.addClass('sorting'); // Ignore sort if only child\n\n    if (this.$sortedEl.is(':only-child')) return;\n    this.sortedPosition = this.$sortedEl.position();\n    this.sortedOrigin = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    $icon.css('cursor', 'grabbing');\n    this.$sortedEl.css('zIndex', '1');\n    var $parent = this.$sortedEl.parent();\n    this.parentScroll = this.$sortedEl.parents('.scroll-wrap').scrollTop() || 0;\n    this.$sortedEl.parent().css({\n      'width': $parent.outerWidth(),\n      'height': $parent.outerHeight()\n    });\n    $parent.children().each(function (_, el) {\n      var $el = $(el);\n      $el.css({\n        'top': $el.position().top,\n        'left': $el.position().left,\n        'width': $el.outerWidth() // 'height': $el.outerHeight()\n\n      });\n    });\n    $parent.children().each(function (_, el) {\n      $(el).css('position', 'absolute');\n    });\n  },\n  sort: function sort(e) {\n    var _this2 = this;\n\n    // const deltaX = e.clientX - this.sortedOrigin.x;\n    if (e.clientY) this.lastClientY = e.clientY;\n    var scrollDeltaY = this.parentScroll - (this.$sortedEl.parents('.scroll-wrap').scrollTop() || 0);\n    var deltaY = this.sortedPosition.top + this.lastClientY - this.sortedOrigin.y - scrollDeltaY;\n    var maxTop = this.$sortedEl.parent().outerHeight() - this.$sortedEl.outerHeight(true);\n    var top = Math.min(Math.max(deltaY, 0), maxTop);\n    this.$sortedEl.css({\n      'top': top // 'left': left\n\n    });\n    this.$sortedEl.nextAll().each(function (_, el) {\n      var $el = $(el);\n\n      if (_this2.$sortedEl.position().top + _this2.$sortedEl.outerHeight() > $el.position().top + $el.outerHeight() / 2) {\n        $el.css('top', $el.position().top - _this2.$sortedEl.outerHeight(true));\n\n        _this2.$sortedEl.before($el);\n      }\n    });\n    this.$sortedEl.prevAll().each(function (_, el) {\n      var $el = $(el);\n\n      if (_this2.$sortedEl.position().top < $el.position().top + $el.outerHeight() / 2) {\n        _this2.$sortedEl.after($el);\n\n        $el.css('top', $el.position().top + _this2.$sortedEl.outerHeight(true));\n      }\n    });\n  },\n  stopSort: function stopSort(e) {\n    $(e.target).css('cursor', '');\n    this.$sortedEl.css({\n      'cursor': '',\n      'zIndex': ''\n    });\n    var $parent = this.$sortedEl.parent();\n    this.$sortedEl.parent().css({\n      'width': '',\n      'height': ''\n    });\n    $parent.children().each(function (id, el) {\n      var $el = $(el);\n      $el.css({\n        'top': '',\n        'left': '',\n        'width': '',\n        // 'height': '',\n        'position': ''\n      });\n      $el.attr('data-order', id);\n    });\n    $parent.scrollTop(this.parentScroll);\n    if ($parent.parents('.calendars-wrap').length) _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reorder();else if ($parent.parents('.events-wrap').length) _events__WEBPACK_IMPORTED_MODULE_2__[\"default\"].reorder();\n    this.$sortedEl.removeClass('sorting');\n    this.$sortedEl = null;\n    _stats__WEBPACK_IMPORTED_MODULE_3__[\"default\"].update();\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  }\n});\n\n//# sourceURL=webpack:///./src/js/sortable.js?");

/***/ }),

/***/ "./src/js/stats.js":
/*!*************************!*\
  !*** ./src/js/stats.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  init: function init() {\n    this.update();\n    $(document).on('mouseenter', '.stat', function (e) {\n      var type = $(e.target).closest('.stat').attr('data-type');\n      $('.calendar-wrap .event').css('opacity', '.3');\n      $(\".calendar-wrap .event[data-type=\\\"\".concat(type, \"\\\"\")).css('opacity', '');\n    });\n    $(document).on('mouseleave', '.stat', function () {\n      $('.calendar-wrap .event').css('opacity', '');\n    });\n  },\n  update: function update() {\n    var events = $('.events-wrap ul li').toArray().map(function (el) {\n      var $el = $(el);\n      return {\n        title: $el.find('span.title').text(),\n        type: parseInt($el.attr('data-type')),\n        color: $el.attr('data-color')\n      };\n    });\n    var html = '';\n\n    var _iterator = _createForOfIteratorHelper(events),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var event = _step.value;\n        var count = $(\".calendar-wrap .calendar.selected .event[data-type=\\\"\".concat(event.type, \"\\\"]\")).length;\n        html += \"<div class=\\\"stat\\\" data-type=\\\"\".concat(event.type, \"\\\">\\n                <p>\\n                    <span class=\\\"event-icon\\\" data-color=\\\"\").concat(event.color, \"\\\"></span>\\n                    \").concat(event.title, \"\\n                    <span class=\\\"count\\\">\").concat(count, \"</span>\\n                </p>\\n            </div>\");\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    $('.stats').html(html);\n  }\n});\n\n//# sourceURL=webpack:///./src/js/stats.js?");

/***/ }),

/***/ "./src/js/templates.js":
/*!*****************************!*\
  !*** ./src/js/templates.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _dates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dates */ \"./src/js/dates.js\");\n/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events */ \"./src/js/events.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./settings */ \"./src/js/settings.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./stats */ \"./src/js/stats.js\");\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  init: function init() {\n    if (_data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].loaded) return;\n    var template = _settings__WEBPACK_IMPORTED_MODULE_4__[\"default\"].template;\n\n    if (template === 'default') {\n      // 1 calendar\n      // 3 events\n      this.createCalendars(1);\n      _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].newEvent([{\n        title: 'Workout',\n        color: 5\n      }, {\n        title: 'Tennis',\n        color: 13\n      }, {\n        title: 'Jogging',\n        color: 9\n      }]);\n    } else if (template === 'filled') {\n      // 3 calendars\n      // 3 events\n      // 30 random occurences\n      this.createCalendars(3);\n      _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].newEvent([{\n        title: 'Workout',\n        color: 5\n      }, {\n        title: 'Tennis',\n        color: 13\n      }, {\n        title: 'Jogging',\n        color: 9\n      }]);\n\n      for (var i = 0; i < 30; i += 1) {\n        var range = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].range(_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].start, _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].end);\n        var date = range[Math.floor(Math.random() * range.length)]; // Get a random event\n\n        var $events = $('.events-wrap ul li');\n        var $event = $events.eq(Math.floor(Math.random() * $events.length));\n        _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].buildEvent({\n          id: ++_events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].eventID,\n          calendar: Math.floor(Math.random() * 3),\n          type: Math.floor(Math.random() * 3),\n          start: date,\n          end: new Date(new Date(date).setDate(date.getDate() + Math.floor(Math.random() * 3)))\n        });\n      }\n\n      _stats__WEBPACK_IMPORTED_MODULE_5__[\"default\"].update();\n    } else if (template === 'events') {\n      // 1 calendar\n      // 20 events (for events colors testing)\n      // 20 occurences (one per event type)\n      this.createCalendars(1);\n      _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].newEvent([{\n        title: 'A',\n        color: 0\n      }, {\n        title: 'B',\n        color: 1\n      }, {\n        title: 'C',\n        color: 2\n      }, {\n        title: 'D',\n        color: 3\n      }, {\n        title: 'E',\n        color: 4\n      }, {\n        title: 'F',\n        color: 5\n      }, {\n        title: 'G',\n        color: 6\n      }, {\n        title: 'H',\n        color: 7\n      }, {\n        title: 'I',\n        color: 8\n      }, {\n        title: 'J',\n        color: 9\n      }, {\n        title: 'K',\n        color: 10\n      }, {\n        title: 'L',\n        color: 11\n      }, {\n        title: 'M',\n        color: 12\n      }, {\n        title: 'N',\n        color: 13\n      }, {\n        title: 'O',\n        color: 14\n      }, {\n        title: 'P',\n        color: 15\n      }, {\n        title: 'Q',\n        color: 16\n      }, {\n        title: 'R',\n        color: 17\n      }, {\n        title: 'S',\n        color: 18\n      }, {\n        title: 'T',\n        color: 19\n      }]);\n\n      for (var _i = 0; _i < 20; _i += 1) {\n        var _date = _dates__WEBPACK_IMPORTED_MODULE_2__[\"default\"].relativeDate(_calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].start, _i);\n\n        _events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].buildEvent({\n          id: ++_events__WEBPACK_IMPORTED_MODULE_3__[\"default\"].eventID,\n          calendar: 0,\n          type: _i,\n          start: _date,\n          end: _date\n        });\n      }\n    }\n  },\n  createCalendars: function createCalendars() {\n    var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getStartEnd();\n\n    for (var i = 0; i < n; i += 1) {\n      _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].newCalendar();\n    }\n\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectFirstCalendar();\n  }\n});\n\n//# sourceURL=webpack:///./src/js/templates.js?");

/***/ }),

/***/ "./src/js/toast.js":
/*!*************************!*\
  !*** ./src/js/toast.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  timeout: null,\n  undo: null,\n  init: function init() {\n    var _this = this;\n\n    $(document).on('click', '.toast', function () {\n      _this.hide();\n    });\n    $(document).on('click', '.toast [data-tool=\"undo\"]', function () {\n      _this.undo();\n    });\n  },\n  show: function show(text, undo) {\n    var _this2 = this;\n\n    var timeout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10000;\n    var html = \"<p>\".concat(text);\n\n    if (undo) {\n      html += \"<span data-tool=\\\"undo\\\">Undo</span>\";\n      this.undo = undo;\n    }\n\n    html += '</p>';\n    $('.toast').html(html).addClass('visible');\n\n    if (timeout !== 0) {\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(function () {\n        _this2.hide();\n      }, timeout);\n    }\n  },\n  hide: function hide() {\n    $('.toast').removeClass('visible');\n  }\n});\n\n//# sourceURL=webpack:///./src/js/toast.js?");

/***/ }),

/***/ "./src/js/tooltip.js":
/*!***************************!*\
  !*** ./src/js/tooltip.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  $tooltip: null,\n  showTimeout: null,\n  init: function init() {\n    var _this = this;\n\n    // Find tooltip element\n    this.$tooltip = $('.tooltip'); // Hover a tooltiped element\n\n    $(document).on('mouseenter', '[data-tooltip]', function (e) {\n      return _this.show(e);\n    }); // Leave a tooltiped element\n\n    $(document).on('mouseout', '[data-tooltip]', function (e) {\n      // Make sure we're not only hovering a child element to tooltiped element (or leaving it)\n      if ($(e.relatedTarget).is('[data-tooltip]') || $(e.relatedTarget).parents('[data-tooltip]').length) return;\n\n      _this.hide();\n    });\n  },\n  show: function show(e) {\n    var _this2 = this;\n\n    var $el = $(e.currentTarget);\n    var text = $el.attr('data-tooltip');\n    var side = $el.attr('data-tooltip-side') || 'bottom';\n    this.$tooltip.find('.tooltip-content').html(text);\n    var top = 0;\n    var left = 0;\n    var margin = 8;\n\n    if (side === 'top') {\n      top = $el.offset().top - this.$tooltip.outerHeight() - margin;\n      left = $el.offset().left + $el.outerWidth() / 2 - this.$tooltip.outerWidth() / 2;\n    } else if (side === 'right') {\n      top = $el.offset().top + $el.outerHeight() / 2 - this.$tooltip.outerHeight() / 2;\n      left = $el.offset().left + $el.outerWidth() + margin;\n    } else if (side === 'bottom') {\n      top = $el.offset().top + $el.outerHeight() + margin;\n      left = $el.offset().left + $el.outerWidth() / 2 - this.$tooltip.outerWidth() / 2;\n    } else if (side === 'left') {\n      top = $el.offset().top + $el.outerHeight() / 2 - this.$tooltip.outerHeight() / 2;\n      left = $el.offset().left - this.$tooltip.outerWidth() - margin;\n    }\n\n    this.$tooltip.css({\n      'top': top,\n      'left': left\n    }).removeClass('top right bottom left').addClass(side);\n    clearTimeout(this.showTimeout);\n    this.showTimeout = setTimeout(function () {\n      _this2.$tooltip.addClass('visible');\n    }, 1000);\n  },\n  hide: function hide() {\n    clearTimeout(this.showTimeout);\n    this.$tooltip.removeClass('visible');\n  }\n});\n\n//# sourceURL=webpack:///./src/js/tooltip.js?");

/***/ }),

/***/ "./src/js/ui.js":
/*!**********************!*\
  !*** ./src/js/ui.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calendars__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calendars */ \"./src/js/calendars.js\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"./src/js/data.js\");\n/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./history */ \"./src/js/history.js\");\n/* harmony import */ var _selection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./selection */ \"./src/js/selection.js\");\n/* harmony import */ var _toast__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./toast */ \"./src/js/toast.js\");\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  view: 'full',\n  tool: 'select',\n  daysShown: [true, true, true, true, true, true, true],\n  init: function init() {\n    var _this = this;\n\n    $(document).on('click', 'header nav > ul > li', function (e) {\n      var $el = $(e.currentTarget);\n      $el.siblings('.open').removeClass('open');\n      $el.toggleClass('open');\n      return false;\n    });\n    $(document).on('mouseenter', 'header nav > ul > li', function (e) {\n      var $el = $(e.currentTarget);\n\n      if ($el.siblings('.open').length) {\n        $('header ul li.open').removeClass('open');\n        $el.toggleClass('open');\n      }\n\n      return false;\n    });\n    $(document).on('click', 'header nav li:not(.disabled)', function (e) {\n      var $target = $(e.currentTarget);\n\n      if ($target.attr('data-checkable') === '') {\n        if ($target.attr('data-radio')) _this.onRadioChange($target);else _this.check($target);\n      } else if ($target.attr('data-tool')) {\n        var tool = $target.attr('data-tool');\n        if (tool === 'save') _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].download();else if (tool === 'open') _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].open();else if (tool === 'undo') _history__WEBPACK_IMPORTED_MODULE_2__[\"default\"].undo();else if (tool === 'redo') _history__WEBPACK_IMPORTED_MODULE_2__[\"default\"].redo();else if (tool === 'cut') _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cutSelection();else if (tool === 'copy') _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].copySelection();else if (tool === 'paste') _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pasteSelection();else if (tool === 'select-all') {\n          _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectAll();\n          $('nav li.open').removeClass('open');\n        } else if (tool === 'edit-all') {\n          $target.toggleClass('checked');\n          $('.calendars-wrap').toggleClass('edit-all');\n        }\n      }\n\n      return false;\n    });\n    $(document).on('click', '', function (e) {\n      $('header ul li.open').removeClass('open');\n    }); // Scroll in linear mode\n\n    $(document).on('wheel', '.calendar-wrap .calendars, .calendars-wrap .scroll-wrap', function (e) {\n      if (_this.viewIs('full')) return; // Keep scroll in sync\n\n      var scrollTop = e.currentTarget.scrollTop;\n      $('.calendar-wrap .calendars, .calendars-wrap .scroll-wrap').scrollTop(scrollTop);\n\n      _this.moveStickyLabels();\n    }); // Change tool\n\n    $(document).on('click', 'header .tool', function (e) {\n      _this.changeTool($(e.currentTarget).attr('data-tool'));\n    }); // Click on day in timeline\n\n    $(document).on('click', '.head [data-day]', function (e) {\n      var $el = $(e.currentTarget);\n      $('.head [data-day].open').removeClass('open');\n      $('.dropdown').removeClass('visible');\n\n      if (e.altKey) {\n        // Alt + click: select all days in column\n        var $day = $el.closest('[data-day]');\n        var day = $day.attr('data-day');\n        var $first = $('.head.full [data-day].selected-first');\n\n        if (e.metaKey) {\n          // Meta key: toggle (add to or remove from selection)\n          if ($day.hasClass('selected')) _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectByWeekdays([day], true, true);else _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectByWeekdays([day], true);\n        } else if (e.shiftKey) {\n          // Shift key: select range\n          var first = $first.attr('data-day');\n          day = day == 0 ? 7 : day;\n          first = first == 0 ? 7 : first;\n          var lowest = Math.min(day, first);\n          var highest = Math.max(day, first); // Build array from lowest to highest day\n\n          var days = Array(highest - lowest + 1).fill(0).map(function (_, i) {\n            return i + lowest;\n          }).map(function (d) {\n            return d === 7 ? '0' : d.toString();\n          });\n          _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectByWeekdays(days);\n        } else {\n          // Default selection\n          _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectByWeekdays([day]);\n          $first.removeClass('selected-first');\n          $day.addClass('selected-first');\n        }\n      } else {\n        $el.addClass('open');\n        $el.find('.dropdown').addClass('visible');\n      }\n\n      return false;\n    }); // Select all days in column\n\n    $(document).on('click', '[data-tool=\"select-weekday\"]', function (e) {\n      var $el = $(e.currentTarget);\n      var day = $el.closest('[data-day]').attr('data-day');\n      _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectByWeekdays([day]);\n      $el.closest('[data-day]').removeClass('open');\n      $el.closest('.dropdown').removeClass('visible');\n      return false;\n    }); // Hide day column\n\n    $(document).on('click', '[data-tool=\"hide-weekday\"]', function (e) {\n      var $el = $(e.currentTarget);\n      $el.closest('[data-day]').removeClass('open');\n      $el.closest('.dropdown').removeClass('visible');\n      var day = $el.closest('[data-day]').attr('data-day');\n\n      _this.showHideWeekday(day, false);\n\n      var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n      _toast__WEBPACK_IMPORTED_MODULE_4__[\"default\"].show(\"\".concat(days[day], \" column hidden\"), function () {\n        _this.showHideWeekday(day, true);\n      });\n      return false;\n    }); // Change head columns icons on mouseenter\n\n    $(document).on('mouseenter', '.head.full', function (e) {\n      if (e.altKey) $(e.currentTarget).addClass('alt');else $(e.currentTarget).removeClass('alt');\n    }); // Change head columns icons on keydown\n\n    $(document).on('keydown', function (e) {\n      if (e.which === 18) $('.head.full').addClass('alt');\n    }); // Change head columns icons on keyup\n\n    $(document).on('keyup', function (e) {\n      if (e.which === 18) $('.head.full').removeClass('alt');\n    });\n    $(document).on('click', '[data-view]', function (e) {\n      var $el = $(e.currentTarget);\n      var view = $el.attr('data-view');\n      if (view === 'full') _this.fullView();else if (view === 'linear') _this.linearView();\n    });\n  },\n  check: function check($target) {\n    var setting = $target.attr('data-setting');\n    var value = $target.attr('data-value');\n    var checked = $target.hasClass('checked');\n    if (setting === 'show-weekday') this.showHideWeekday(value, !checked);else $target.toggleClass('checked');\n  },\n  onRadioChange: function onRadioChange($target) {\n    var radio = $target.attr('data-radio');\n    $(\"nav [data-radio=\\\"\".concat(radio, \"\\\"]\")).removeClass('checked');\n    $target.addClass('checked');\n\n    if (radio === 'view') {\n      var view = $target.attr('data-value');\n      if (view === 'full') this.fullView();else if (view === 'linear') this.linearView();\n      _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n    }\n  },\n  fullView: function fullView() {\n    this.view = 'full'; // Update UI\n\n    $('main').removeClass('linear');\n    $('[data-view]').removeClass('selected');\n    $('[data-view=\"full\"]').addClass('selected'); // Keep only one calendar\n\n    $('.calendar-wrap .calendar').eq(1).empty();\n    $('.calendar-wrap .calendar').slice(1).remove(); // Select current calendar\n\n    var $selectedCalendar = $('.calendars-wrap .calendar.selected');\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectCalendar($selectedCalendar); // Update height\n\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight(); // Check option in menu (when switched from shorcut)\n\n    $(\"nav [data-radio=\\\"view\\\"]\").removeClass('checked');\n    $(\"nav [data-radio=\\\"view\\\"][data-value=\\\"full\\\"]\").addClass('checked');\n  },\n  linearView: function linearView() {\n    this.view = 'linear'; // Store .selected-first and .selected-last dates\n\n    var selectedFirst = $('.selected-first').attr('data-date');\n    var selectedLast = $('.selected-last').attr('data-date'); // Update UI\n\n    $('main').addClass('linear');\n    $('[data-view]').removeClass('selected');\n    $('[data-view=\"linear\"]').addClass('selected'); // Duplicate every minical\n\n    $('.calendar-wrap .calendar').remove();\n    $('.calendars-wrap .calendar').each(function (_, el) {\n      var $el = $(el);\n      var content = $el.find('.content').html();\n      $('.calendar-wrap .calendars').append(\"<div class=\\\"content calendar \".concat($el.hasClass('hidden') ? 'hidden' : '', \"\\\" data-id=\\\"\").concat($el.attr('data-id'), \"\\\">\").concat(content, \"</div>\"));\n    }); // Select current calendar and restore .selected-first and .selected-last classes\n\n    var $selectedCalendar = $('.calendars-wrap .calendar.selected');\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].selectCalendar($selectedCalendar, selectedFirst, selectedLast); // Update height\n\n    _calendars__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateCalendarHeight(); // Check option in menu (when switched from shorcut)\n\n    $(\"nav [data-radio=\\\"view\\\"]\").removeClass('checked');\n    $(\"nav [data-radio=\\\"view\\\"][data-value=\\\"linear\\\"]\").addClass('checked');\n    this.moveStickyLabels();\n  },\n  viewIs: function viewIs(view) {\n    return this.view === view;\n  },\n  changeTool: function changeTool(tool) {\n    this.tool = tool; // Update header UI\n\n    $('header .tool.selected').removeClass('selected');\n    $(\"header .tool[data-tool=\\\"\".concat(tool, \"\\\"]\")).addClass('selected'); // Update main calendar UI\n\n    $('.calendar-wrap').removeClass('select draw comment').addClass(tool); // Remove selection when entering draw mode\n\n    if (tool === 'draw') {\n      _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].selectedDays = [];\n      _selection__WEBPACK_IMPORTED_MODULE_3__[\"default\"].highlightSelection();\n    }\n\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  toolIs: function toolIs(tool) {\n    return this.tool === tool;\n  },\n  showHideWeekday: function showHideWeekday(day, show) {\n    var $day = $(\"[data-day=\".concat(day, \"]\"));\n    var $li = $(\"nav [data-setting=\\\"show-weekday\\\"][data-value=\\\"\".concat(day, \"\\\"]\"));\n\n    if (show) {\n      $day.show();\n      $li.addClass('checked');\n    } else {\n      $day.hide();\n      $li.removeClass('checked');\n    }\n\n    this.daysShown[day] = show;\n    _data__WEBPACK_IMPORTED_MODULE_1__[\"default\"].save();\n  },\n  moveStickyLabels: function moveStickyLabels() {\n    var colWidth = $(window).width() <= 1120 ? 24 : 240; // Keep (visible) event titles in view\n\n    $('.calendar-wrap .event .title:visible').each(function (_, el) {\n      var $title = $(el);\n      var $event = $title.closest('.event');\n      var id = $event.attr('data-id');\n      var $events = $(\".calendar-wrap .event[data-id=\\\"\".concat(id, \"\\\"]\")); // Ignore one-day events\n\n      if ($events.length === 1) return; // Total event width (add up single .events widths)\n\n      var width = $events.toArray().reduce(function (acc, curr) {\n        return acc + curr.offsetWidth;\n      }, 0);\n      var eventOffsetLeft = $event.offset().left;\n      var eventOffsetRight = eventOffsetLeft + width;\n\n      if (eventOffsetLeft < colWidth && eventOffsetRight > colWidth) {\n        var top = $event.offset().top + 2; // Make title stick to left border or right end of event\n\n        var left = Math.min(Math.ceil(eventOffsetRight - $title.outerWidth() - (colWidth + 14)), 0) + colWidth + 6;\n        $title.css({\n          'position': 'fixed',\n          'top': top,\n          'left': left\n        });\n      } else {\n        $title.css({\n          'position': '',\n          'top': '',\n          'left': ''\n        });\n      }\n    }); // Keep month label in view\n\n    $('.head.linear .months > div').each(function (_, el) {\n      var $wrap = $(el);\n      var $month = $wrap.find('.month');\n      var wrapOffsetLeft = $wrap.offset().left;\n      var wrapOffsetRight = wrapOffsetLeft + $wrap.outerWidth(); // if (wrapOffsetLeft - 16 < colWidth && wrapOffsetRight - $month.outerWidth() > colWidth) {\n\n      if (wrapOffsetLeft - 16 <= colWidth && wrapOffsetRight > colWidth) {\n        var top = $month.offset().top; // Make label stick to right end of month\n\n        var left = colWidth + 16 + Math.min(wrapOffsetRight - $month.outerWidth() - colWidth - 32, 0);\n        $month.css({\n          'position': 'fixed',\n          'top': top,\n          'left': left\n        });\n      } else {\n        $month.css({\n          'position': '',\n          'top': '',\n          'left': ''\n        });\n      }\n    });\n  }\n});\n\n//# sourceURL=webpack:///./src/js/ui.js?");

/***/ })

/******/ });